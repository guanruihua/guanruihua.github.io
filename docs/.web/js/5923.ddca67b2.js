"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[5923],{2942:(t,e,s)=>{s.d(e,{gQ:()=>n,ni:()=>a});var i=s(5296);const a=(t,e,s)=>{i.useEffect(()=>{const i=document.createElement("script");return i.src=t,i.onload=()=>{null==e||e()},document.body.appendChild(i),()=>{null==s||s(),document.body.removeChild(i)}},[])};var r=(t,e,s)=>new Promise((i,a)=>{var r=t=>{try{o(s.next(t))}catch(t){a(t)}},n=t=>{try{o(s.throw(t))}catch(t){a(t)}},o=t=>t.done?i(t.value):Promise.resolve(t.value).then(r,n);o((s=s.apply(t,e)).next())});function n(t){const[e,s]=i.useState("");return i.useEffect(()=>{r(null,null,function*(){const e=localStorage.getItem(t);e&&s(e||""),fetch(t).then(e=>r(null,null,function*(){const i=yield e.text();localStorage.setItem(t,i||""),s(i)})).catch(console.error)})},[]),[e,s]}},5923:(t,e,s)=>{s.r(e),s.d(e,{default:()=>h});var i=s(5296),a=s(2942),r=Object.defineProperty,n=(t,e,s)=>((t,e,s)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s)(t,"symbol"!=typeof e?e+"":e,s);const o=()=>{(0,a.ni)("/js/gsap.3.12.5.min.js",()=>{const t=document.querySelector(".image");new class{constructor(t){n(this,"DOM",{el:null,innerElems:null,debugPanel:null,cursorDrag:null}),n(this,"bgImage"),n(this,"currentShape","rectangle"),n(this,"currentEffect","stroke"),n(this,"duration",.8),n(this,"ease","power2.inOut"),n(this,"scaleInterval",.06),n(this,"rotationInterval",15),n(this,"parallaxStrength",20),n(this,"innerTotal",10),n(this,"shapeSize",45),n(this,"transformOrigin","50% 50%"),n(this,"mouseX",0),n(this,"mouseY",0),n(this,"centerX",0),n(this,"centerY",0),n(this,"isHovered",!1),n(this,"isDragging",!1),n(this,"dragStartY",0),n(this,"dragDistance",0),n(this,"smoothDragDistance",0),n(this,"isRotationActive",!1),n(this,"currentRotation",0),n(this,"currentScale",1),n(this,"layerOutlines",[]),n(this,"layerShadows",[]),n(this,"dragLerpFactor",.1),n(this,"animationFrame",null),n(this,"hoverTimeline",null),n(this,"isTransitioning",!1),this.DOM={el:t,debugPanel:document.getElementById("debugPanel"),cursorDrag:document.getElementById("cursorDrag")},this.bgImage=/(?:\(['"]?)(.*?)(?:['"]?\))/.exec(this.DOM.el.style.backgroundImage)[1],gsap.set(this.DOM.el,{backgroundImage:"none"}),this.createLayers(),gsap.set(this.DOM.el,{transformOrigin:this.transformOrigin}),this.createLayerOutlines(),this.createHoverTimeline(),this.initEvents(),this.initShapeControls(),this.initEffectControls(),this.startAnimationLoop()}createLayers(){let t="";for(let e=0;e<this.innerTotal;e++){t+=`<div class="image__element ${0===e?"rectangle":this.currentShape} ${0===e?"base-layer":""}" style="background-image:url(${this.bgImage})" data-layer="${e}"></div>`}this.DOM.el.innerHTML=t,this.DOM.innerElems=this.DOM.el.querySelectorAll(".image__element"),this.updateCenter()}updateCenter(){const t=this.DOM.el.getBoundingClientRect();this.centerX=t.left+t.width/2,this.centerY=t.top+t.height/2}createLayerOutlines(){this.layerOutlines.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.layerOutlines=[],this.layerShadows.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.layerShadows=[],this.DOM.innerElems.forEach((t,e)=>{if(0===e)return;const s=t.querySelector(".layer-outline"),i=t.querySelector(".layer-shadow");s&&s.remove(),i&&i.remove();const a=document.createElement("div");a.className="layer-outline",a.setAttribute("data-layer",e);const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("preserveAspectRatio","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path"),o=this.getLayerShapePath(e);n.setAttribute("d",o),n.setAttribute("stroke","#ffffff"),n.setAttribute("stroke-width","1"),n.setAttribute("fill","none"),n.setAttribute("vector-effect","non-scaling-stroke"),n.style.filter="drop-shadow(0 0 2px rgba(255, 255, 255, 0.5))",r.appendChild(n),a.appendChild(r);const h=document.createElement("div");h.className="layer-shadow",h.setAttribute("data-layer",e);const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("viewBox","0 0 100 100"),c.setAttribute("preserveAspectRatio","none");for(let t=0;t<3;t++){const s=document.createElementNS("http://www.w3.org/2000/svg","path"),i=this.getLayerShapePath(e);s.setAttribute("d",i);const a=.4-.08*t,r=3-.8*t;s.setAttribute("fill","none"),s.setAttribute("stroke",`rgba(0, 0, 0, ${a})`),s.setAttribute("stroke-width",r),s.setAttribute("vector-effect","non-scaling-stroke"),c.appendChild(s)}h.appendChild(c),t.appendChild(a),t.appendChild(h),this.layerOutlines.push(a),this.layerShadows.push(h)})}getLayerShapePath(t){switch(this.currentShape){case"rectangle":return"M 0 0 L 100 0 L 100 100 L 0 100 Z";case"triangle":return"M 50 5 L 10 95 L 90 95 Z";case"chevron":return"M 75 0 L 100 50 L 75 100 L 0 100 L 25 50 L 0 0 Z";case"oval":return"M 50 15 C 74.85 15 95 31.32 95 50 C 95 68.68 74.85 85 50 85 C 25.15 85 5 68.68 5 50 C 5 31.32 25.15 15 50 15 Z";default:return""}}startAnimationLoop(){const t=()=>{this.smoothDragDistance+=(this.dragDistance-this.smoothDragDistance)*this.dragLerpFactor,this.isHovered&&!this.isTransitioning&&(this.isRotationActive?(this.updateDragRotation(),this.updateLayerOutlines()):this.isDragging||(this.updateParallax(),this.updateLayerOutlines())),this.updateDebugInfo(),this.animationFrame=requestAnimationFrame(t)};t()}updateParallax(){const t=(this.mouseX-this.centerX)/(this.DOM.el.offsetWidth/2),e=(this.mouseY-this.centerY)/(this.DOM.el.offsetHeight/2);this.DOM.innerElems.forEach((s,i)=>{if(0===i)return;const a=.2*i,r=t*this.parallaxStrength*a*.5,n=e*this.parallaxStrength*a*.5;gsap.set(s,{x:r,y:n,z:10*i,transformPerspective:1e3})})}updateDragRotation(){const t=Math.min(Math.abs(this.smoothDragDistance)/100,1);this.DOM.innerElems.forEach((e,s)=>{if(0===s)return;const i=this.smoothDragDistance/2*t*(.3*s),a=(this.mouseX-this.centerX)/(this.DOM.el.offsetWidth/2),r=(this.mouseY-this.centerY)/(this.DOM.el.offsetHeight/2),n=.3*s,o=a*this.parallaxStrength*n,h=r*this.parallaxStrength*n;gsap.set(e,{x:o,y:h,z:15*s,rotationX:15*r*t,rotationY:-15*a*t,rotationZ:i,transformPerspective:1e3,transformStyle:"preserve-3d"})}),this.currentRotation=this.smoothDragDistance/2,this.currentScale=1+2*Math.abs(t)}updateLayerOutlines(){this.updateEffectVisibility()}updateDebugInfo(){if(!this.DOM.debugPanel)return;const t=this.DOM.debugPanel.querySelector("#rotationInfo"),e=this.DOM.debugPanel.querySelector("#scaleInfo"),s=this.DOM.debugPanel.querySelector("#edgesInfo");if(t&&(t.textContent=`rotation: ${this.currentRotation.toFixed(1)}`),e&&(e.textContent=`scale: ${this.currentScale.toFixed(1)}`),s){const t=this.getShapeEdgeCount();s.textContent=`edges: ${t.toFixed(1)}`}}getShapeEdgeCount(){switch(this.currentShape){case"rectangle":return 4;case"triangle":return 3;case"chevron":return 6;default:return 0}}applyCurrentShape(){this.DOM.innerElems.forEach((t,e)=>{0!==e&&(t.classList.remove("rectangle","triangle","chevron","oval"),t.classList.add(this.currentShape))}),this.createLayerOutlines()}initShapeControls(){const t=document.querySelectorAll(".shape-btn");t.forEach(e=>{e.addEventListener("click",()=>{const s=e.dataset.shape;s===this.currentShape||this.isTransitioning||(this.changeShape(s),t.forEach(t=>t.classList.remove("active")),e.classList.add("active"))})})}initEffectControls(){const t=document.querySelectorAll(".effect-btn");t.forEach(e=>{e.addEventListener("click",()=>{const s=e.dataset.effect;s===this.currentEffect||this.isTransitioning||(this.changeEffect(s),t.forEach(t=>t.classList.remove("active")),e.classList.add("active"))})})}changeEffect(t){this.currentEffect=t,this.updateEffectVisibility()}updateEffectVisibility(){this.layerOutlines.forEach(t=>{"stroke"===this.currentEffect&&this.isRotationActive?t.classList.add("active"):t.classList.remove("active")}),this.layerShadows.forEach(t=>{"shade"===this.currentEffect&&this.isRotationActive?t.classList.add("active"):t.classList.remove("active")})}changeShape(t){if(this.isTransitioning)return;this.isTransitioning=!0;new Promise(t=>{this.hoverTimeline&&this.hoverTimeline.pause(),gsap.to(this.DOM.innerElems,{scale:1,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,duration:.4,ease:"power2.out",onComplete:t}),this.isRotationActive=!1,this.DOM.el.classList.remove("rotation-active"),this.dragDistance=0,this.smoothDragDistance=0,this.currentRotation=0,this.currentScale=1,this.layerOutlines.forEach(t=>{t.classList.remove("active")}),this.layerShadows.forEach(t=>{t.classList.remove("active")})}).then(()=>{this.currentShape=t,this.applyCurrentShape(),this.createHoverTimeline(),this.isHovered&&this.hoverTimeline.play(),this.isTransitioning=!1})}createHoverTimeline(){const t=t=>{let e=1-this.scaleInterval*t;return e>=0?e:0};this.hoverTimeline&&this.hoverTimeline.kill();const e=Array.from(this.DOM.innerElems).reverse();this.hoverTimeline=gsap.timeline({paused:!0}).to(e,{scale:(e,s)=>{const i=Array.from(this.DOM.innerElems).indexOf(s);return t(i)},duration:this.duration,ease:this.ease,stagger:.1})}initEvents(){this.DOM.el.addEventListener("mouseenter",()=>{this.isTransitioning||(this.isHovered=!0,this.updateCenter(),this.hoverTimeline.play(),this.DOM.cursorDrag&&(this.DOM.cursorDrag.style.opacity="1"))}),this.DOM.el.addEventListener("mouseleave",()=>{this.isHovered=!1,this.isTransitioning||this.hoverTimeline.reverse(),this.resetTransforms(),this.DOM.cursorDrag&&(this.DOM.cursorDrag.style.opacity="0")}),this.DOM.el.addEventListener("mousemove",t=>{this.mouseX=t.clientX,this.mouseY=t.clientY,this.DOM.cursorDrag&&(this.DOM.cursorDrag.style.left=t.clientX+"px",this.DOM.cursorDrag.style.top=t.clientY+"px")}),document.addEventListener("mousemove",t=>{this.DOM.cursorDrag&&this.isHovered&&(this.DOM.cursorDrag.style.left=t.clientX+"px",this.DOM.cursorDrag.style.top=t.clientY+"px")}),this.DOM.el.addEventListener("mousedown",t=>{this.isTransitioning||(this.isDragging=!0,this.dragStartY=t.clientY,this.DOM.el.classList.add("dragging"),this.DOM.cursorDrag&&this.DOM.cursorDrag.classList.add("hide-up"),t.preventDefault())}),document.addEventListener("mousemove",t=>{this.isDragging&&!this.isTransitioning&&(this.dragDistance=t.clientY-this.dragStartY,Math.abs(this.dragDistance)>30&&!this.isRotationActive&&(this.isRotationActive=!0,this.DOM.el.classList.add("rotation-active")))}),document.addEventListener("mouseup",()=>{this.isDragging&&(this.isDragging=!1,this.DOM.el.classList.remove("dragging"),this.DOM.cursorDrag&&this.isHovered&&this.DOM.cursorDrag.classList.remove("hide-up"),gsap.to(this,{dragDistance:0,duration:.5,ease:"power2.out"}))}),window.addEventListener("resize",()=>{this.updateCenter(),this.createLayerOutlines()}),this.DOM.el.addEventListener("touchstart",t=>{this.isTransitioning||(this.isDragging=!0,this.dragStartY=t.touches[0].clientY,this.DOM.el.classList.add("dragging"),t.preventDefault())}),document.addEventListener("touchmove",t=>{this.isDragging&&!this.isTransitioning&&(this.dragDistance=t.touches[0].clientY-this.dragStartY,Math.abs(this.dragDistance)>30&&!this.isRotationActive&&(this.isRotationActive=!0,this.DOM.el.classList.add("rotation-active")))}),document.addEventListener("touchend",()=>{this.isDragging&&(this.isDragging=!1,this.DOM.el.classList.remove("dragging"),gsap.to(this,{dragDistance:0,duration:.5,ease:"power2.out"}))})}resetTransforms(){this.DOM.innerElems.forEach((t,e)=>{0!==e&&gsap.to(t,{x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,duration:.6,ease:"power2.out"})}),gsap.to(this,{smoothDragDistance:0,duration:.6,ease:"power2.out"}),this.isRotationActive=!1,this.DOM.el.classList.remove("rotation-active"),this.currentRotation=0,this.currentScale=1,this.layerOutlines.forEach(t=>{t.classList.remove("active")}),this.layerShadows.forEach(t=>{t.classList.remove("active")})}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.hoverTimeline&&this.hoverTimeline.kill(),this.layerOutlines.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.layerShadows.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})}}(t)})};function h(){return o(),i.createElement("div",{className:"animation__repetition-image"},i.createElement("div",{className:"main-container"},i.createElement("div",{className:"image",style:{backgroundImage:"url('https://cdn.prod.website-files.com/65e61ac90950149fdb15e419/685027578326569ff9bb118d_2025-06-16%2017.16.41.jpg')"}})),i.createElement("div",{className:"controls"},i.createElement("div",{className:"shape-controls"},i.createElement("button",{className:"shape-btn active","data-shape":"rectangle"},"1"),i.createElement("button",{className:"shape-btn","data-shape":"triangle"},"2"),i.createElement("button",{className:"shape-btn","data-shape":"chevron"},"3"),i.createElement("button",{className:"shape-btn","data-shape":"oval"},"4")),i.createElement("div",{className:"effect-controls"},i.createElement("button",{className:"effect-btn active","data-effect":"stroke"},"STROKE"),i.createElement("span",null,"OR"),i.createElement("button",{className:"effect-btn","data-effect":"shade"},"SHADE"))),i.createElement("div",{className:"cursor-drag",id:"cursorDrag"},i.createElement("span",{className:"drag-text"},"DRAG")),i.createElement("div",{className:"debug-panel",id:"debugPanel"},i.createElement("div",{className:"debug-info"},i.createElement("span",{id:"rotationInfo"},"rotation: 0.0"),i.createElement("span",{id:"scaleInfo"},"scale: 1.0"),i.createElement("span",{id:"edgesInfo"},"edges: 0.0"))))}}}]);