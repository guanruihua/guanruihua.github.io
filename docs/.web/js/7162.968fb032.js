"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[7162],{1814:(e,t,n)=>{function o(e){return null==e||e!=e}function r(e){return void 0===e}n.d(t,{B9:()=>c,Et:()=>l,Gv:()=>s,Im:()=>o,Kg:()=>a,Lm:()=>y,ZX:()=>u,b0:()=>r,cy:()=>d,vH:()=>p});Number.isNaN;function i(e){try{if("object"==typeof(t=e)&&!o(t)&&/Iterator\]$/.test(t.toString()))return"Iterator";const n=Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1];return"Number"===n&&isNaN(e)?"NaN":n}catch(e){return"Undefined"}var t}function s(e){return null!==e&&"object"==typeof e&&"Object"===i(e)}function c(e){return!o(e)&&(s(e)&&0!==Reflect.ownKeys(e).length)}function a(e){return"string"==typeof e}const l=e=>"number"==typeof e&&"Number"===i(e);function u(e){return!!l(e)||(a(e)&&(e=e.trim()),!o(e)&&""!==e&&!1===Number.isNaN(Number(e)))}function d(e){return Array.isArray(e)}function p(e){return!o(e)&&(d(e)&&e.length>0)}new Map([["Image",["png","jpeg","jpg","png","bmp"]],["Video",["mp4","webm","ogg"]],["PDF",["pdf"]],["Word",["doc","docx"]],["Excel",[".xlsx",".xls",".csv"]]]);const b="undefined"!=typeof window,y=e=>"boolean"==typeof e;b&&window?.navigator?.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent)},6045:(e,t,n)=>{n.d(t,{xI:()=>u});var o=n(5296);function r(e){return null==e||e!=e}function i(e){try{if("object"==typeof(t=e)&&!r(t)&&/Iterator\]$/.test(t.toString()))return"Iterator";const n=Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1];return"Number"===n&&isNaN(e)?"NaN":n}catch(e){return"Undefined"}var t}function s(e){return"string"==typeof e}const c=e=>"number"==typeof e&&"Number"===i(e);function a(e){return!r(e)&&(function(e){return Array.isArray(e)}(e)&&e.length>0)}const l="undefined"!=typeof window;function u(e={},t,n=localStorage){const[r,i]=(0,o.useState)(e),l=e=>{if(i(e),t)try{n.setItem(t,JSON.stringify(e))}catch(e){return void console.warn(e)}};return(0,o.useEffect)(()=>{if(t)try{const e=n.getItem(t);if(!e||"{}"===e)return;l(JSON.parse(e))}catch(e){return}},[t,n]),[r,(e,t=!1)=>{const n="function"==typeof e?e(r):e;l(t?n:{...r,...n})},t=>{if(a(t)){const n={...r};return t.forEach(t=>{(s(t)||c(t))&&(n[t]=e[t])}),void l(n)}l(e)}]}l&&window?.navigator?.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent)},8166:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var o=n(5296),r=n(6045);const i=n.p+".web/img/ball_32_32.png",s=n.p+".web/img/paddle_128_32.png",c=n.p+".web/img/brick1_64_32.png",a=n.p+".web/img/brick2_64_32.png",l=n.p+".web/img/brick3_64_32.png";function u(){this.load.image("ball",i),this.load.image("paddle",s),this.load.image("brick1",c),this.load.image("brick2",a),this.load.image("brick3",l)}function d(e,t){t.disableBody(!0,!0);let n=0;0==e.body.velocity.x&&(n=Math.random(),n>=.5?e.setVelocityX(150):e.setVelocityX(-150))}function p(e,t){e.setVelocityY(e.body.velocity.y-5);let n=Math.abs(e.body.velocity.x)+5;e.x<t.x?e.setVelocityX(-n):e.setVelocityX(n)}var b=n(1814),y=Object.defineProperty,h=Object.defineProperties,g=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,v=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const O=e=>{const t=(()=>{const{width:t,height:n}=e;return o=((e,t)=>{for(var n in t||(t={}))m.call(t,n)&&v(e,n,t[n]);if(f)for(var n of f(t))w.call(t,n)&&v(e,n,t[n]);return e})({},e),r={width:(0,b.Et)(t)?t:Number(t),height:(0,b.Et)(n)?n:Number(n)},h(o,g(r));var o,r})(),{width:n,height:o}=t;let r=null,i=null,s=[],c=null,a=!1,l={opening:null,gameOver:null,playerWon:null};return{key:"game",preload:u,create:function(){var e;const t=this;r=t.physics.add.sprite(n/2,o-20,"paddle"),i=t.physics.add.sprite(n/2,o-40,"ball"),s=(e=>[e.physics.add.group({key:"brick1",repeat:4,immovable:!0,setXY:{x:80,y:40,stepX:70}}),e.physics.add.group({key:"brick2",repeat:4,immovable:!0,setXY:{x:80,y:90,stepX:70}}),e.physics.add.group({key:"brick3",repeat:4,immovable:!0,setXY:{x:80,y:140,stepX:70}})])(t),c=null==(e=t.input.keyboard)?void 0:e.createCursorKeys(),r.setCollideWorldBounds(!0),i.setCollideWorldBounds(!0),i.setBounce(1,1),t.physics.world.checkCollision.down=!1,s.forEach(e=>{i&&e&&t.physics.add.collider(i,e,d,void 0,t)}),r.setImmovable(!0),t.physics.add.collider(i,r,p,void 0,t),l=(e=>{const t=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"Press SPACE to Start",{fontFamily:"Monaco, Courier, monospace",fontSize:"12px"});t.setOrigin(.5);const n=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"Game Over",{fontFamily:"Monaco, Courier, monospace",fontSize:"50px",color:"#F60000"});n.setOrigin(.5),n.setVisible(!1);const o=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"You won!",{fontFamily:"Monaco, Courier, monospace",fontSize:"50px"});return o.setOrigin(.5),o.setVisible(!1),{opening:t,gameOver:n,playerWon:o}})(t)},update:function(){var e,t,n;(null==r?void 0:r.body)&&i&&c&&(!function(e,t){return!(!(null==e?void 0:e.body)||!(null==t?void 0:t.bounds))&&e.body.y>t.bounds.height}(i,this.physics.world)?!function(e){let t=-1;return e.forEach(e=>{e&&(-1!==t?t+=e.countActive():t=e.countActive())}),0===t}(s)?(r.setVelocityX(0),c.left.isDown?r.setVelocityX(-350):c.right.isDown&&r.setVelocityX(350),a||(i.setX(r.x),c.space.isDown&&(a=!0,i.setVelocityY(-200),null==(n=l.opening)||n.setVisible(!1)))):(null==(t=l.playerWon)||t.setVisible(!0),i.disableBody(!0,!0)):(null==(e=l.gameOver)||e.setVisible(!0),i.disableBody(!0,!0)))}}},N=n.p+".web/img/bg2.jpg";function j(){this.load.image("bg",N)}var x=Object.defineProperty,k=Object.defineProperties,S=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,_=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V=(e,t)=>{for(var n in t||(t={}))E.call(t,n)&&_(e,n,t[n]);if(P)for(var n of P(t))F.call(t,n)&&_(e,n,t[n]);return e},X=(e,t)=>k(e,S(t));const C=e=>{let t=null;const{width:n,height:o}=(()=>{const{width:t,height:n}=e;return X(V({},e),{width:(0,b.Et)(t)?t:Number(t),height:(0,b.Et)(n)?n:Number(n)})})();return{key:"menu",active:!0,create:function(){const e=this;e.cameras.main.setBackgroundColor("#111111");const r=e.add.image(n,o,"bg").setOrigin(.5).setDepth(-1),i=Math.max(n/r.width,o/r.height);r.setScale(i).setPosition(n/2,o/2),r.setAlpha(.3);const s={fontSize:"32px"};t=e.add.text(n/2,o/2,"Start",X(V({},s),{color:"#FFFFFF"})).on("pointerover",()=>{null==t||t.setStyle(X(V({},s),{fill:"#8FB4F8"})),e.sys.canvas.classList.add("pointer")}).on("pointerout",()=>{null==t||t.setStyle(X(V({},s),{fill:"#FFFFFF"})),e.sys.canvas.classList.remove("pointer")}).setOrigin(.5).setInteractive().on("pointerdown",()=>{e.scene.stop("menu"),e.scene.start("game")}),e.scene.stop("menu"),e.scene.start("game")},preload:j}},I=()=>{const e=o.useRef(null),{Phaser:t}=(()=>{const[e,t]=o.useState(null);return o.useEffect(()=>{const e="/js/phaser.min.js",n=document.createElement("script");return n.src=e,n.onload=()=>{console.log("Phaser",e,"已加载");const n=window.Phaser;t(n)},document.body.appendChild(n),()=>{document.body.removeChild(n)}},[]),{Phaser:e}})(),[n,i]=(0,r.xI)({});return o.useEffect(()=>{t&&e.current&&((e,t)=>{console.log(e);const n={type:e.WEBGL,backgroundColor:"#000000",width:window.innerWidth,height:window.innerHeight,parent:t,scale:{},scene:[],physics:{default:"arcade"}};n.scene=[C(n),O(n)],new e.Game(n)})(t,e.current)},[t,e.current]),{containerRef:e,state:n,setState:i}};function A(){const e=I();return o.createElement("div",{className:"game__brick"},o.createElement("div",{ref:e.containerRef}))}}}]);