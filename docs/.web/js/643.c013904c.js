"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[643],{643:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(6540),o=n(7317);const u=()=>{const[e,t]=(0,o.xI)({selectFileType:"",review:""},"dev/file-review|cache");return{state:e,setState:t}};var c=n(5134),i=(e,t,n)=>new Promise((r,o)=>{var u=e=>{try{i(n.next(e))}catch(e){o(e)}},c=e=>{try{i(n.throw(e))}catch(e){o(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(u,c);i((n=n.apply(e,t)).next())});function a(){const{state:e,setState:t}=u();return r.createElement("div",{className:"tool-file-review"},r.createElement("div",{className:"content"},r.createElement("div",{className:"controls"},r.createElement("h5",null,"md, txt, docx, pdf"),r.createElement("input",{type:"file",onChange:e=>{var n;(e=>{i(null,null,function*(){const n=yield(0,c._)(e);console.log(n),t({review:n})})})(null==(n=e.target.files)?void 0:n[0])}})),r.createElement("div",{className:"review"},r.createElement("pre",null,e.review))))}},5134:(e,t,n)=>{n.d(t,{_:()=>c});var r=n(9108),o=n(306),u=(e,t,n)=>new Promise((r,o)=>{var u=e=>{try{i(n.next(e))}catch(e){o(e)}},c=e=>{try{i(n.throw(e))}catch(e){o(e)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(u,c);i((n=n.apply(e,t)).next())});const c=e=>u(null,null,function*(){return new Promise(t=>u(null,null,function*(){if(!(0,r.Kg)(e.name))return;const n=e.name.split(".").at(-1),c=new FileReader;if(c.onerror=function(){t("")},["md","txt","json"].includes(n))return c.onload=function(e){var n;const o=(null==(n=e.target)?void 0:n.result)||"";(0,r.Kg)(o)&&t(o)},void c.readAsText(e);if(["docx"].includes(n))return c.onload=function(e){var n;const r=(null==(n=e.target)?void 0:n.result)||"";o.extractRawText({arrayBuffer:r}).then(e=>{console.log(e),t((null==e?void 0:e.value)||"")}).catch(()=>{t("")})},void c.readAsArrayBuffer(e);if(["pdf"].includes(n)){const n=(e,t)=>u(null,null,function*(){const n=yield e.getPage(t),r=yield n.getTextContent(),o=[];let u="",c=-1;r.items.map(e=>{const{str:t,hasEOL:n}=e;return n?(u.length>c&&(c=u.length),o.push(u),u=""):u+=t,t});let i="",a=3*c/5;return o.forEach((e,t)=>{e.length<a?i=i+e+"\n":i+=e}),i});return c.onload=e=>u(null,null,function*(){var r;try{const o=(null==(r=e.target)?void 0:r.result)||"",u=yield window.pdfjsLib.getDocument(o).promise,c=[];console.log(u);for(let e=1;e<=u.numPages;e++)c.push(n(u,e));const i=yield Promise.all(c);console.log(i),t(i.join("\n"))}catch(e){console.error(e),t("")}}),void c.readAsArrayBuffer(e)}t("")}))})},7317:(e,t,n)=>{n.d(t,{xI:()=>s});var r=n(6540);function o(e){return null==e||e!=e}function u(e){try{if("object"==typeof(t=e)&&!o(t)&&/Iterator\]$/.test(t.toString()))return"Iterator";const n=Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1];return"Number"===n&&isNaN(e)?"NaN":n}catch(e){return"Undefined"}var t}function c(e){return"string"==typeof e}const i=e=>"number"==typeof e&&"Number"===u(e);function a(e){return!o(e)&&(function(e){return Array.isArray(e)}(e)&&e.length>0)}const l="undefined"!=typeof window;function s(e={},t,n=localStorage){const[o,u]=(0,r.useState)(e),l=e=>{if(u(e),t)try{n.setItem(t,JSON.stringify(e))}catch(e){return void console.warn(e)}};return(0,r.useEffect)(()=>{if(t)try{const e=n.getItem(t);if(!e||"{}"===e)return;l(JSON.parse(e))}catch(e){return}},[t,n]),[o,(e,t=!1)=>{const n="function"==typeof e?e(o):e;l(t?n:{...o,...n})},t=>{if(a(t)){const n={...o};return t.forEach(t=>{(c(t)||i(t))&&(n[t]=e[t])}),void l(n)}l(e)}]}l&&window?.navigator?.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent)},9108:(e,t,n)=>{function r(e){return null==e||e!=e}function o(e){return void 0===e}n.d(t,{B9:()=>i,Et:()=>l,Gv:()=>c,Im:()=>r,Kg:()=>a,Lm:()=>v,ZX:()=>s,b0:()=>o,cy:()=>f,vH:()=>d});Number.isNaN;function u(e){try{if("object"==typeof(t=e)&&!r(t)&&/Iterator\]$/.test(t.toString()))return"Iterator";const n=Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1];return"Number"===n&&isNaN(e)?"NaN":n}catch(e){return"Undefined"}var t}function c(e){return null!==e&&"object"==typeof e&&"Object"===u(e)}function i(e){return!r(e)&&(c(e)&&0!==Reflect.ownKeys(e).length)}function a(e){return"string"==typeof e}const l=e=>"number"==typeof e&&"Number"===u(e);function s(e){return!!l(e)||(a(e)&&(e=e.trim()),!r(e)&&""!==e&&!1===Number.isNaN(Number(e)))}function f(e){return Array.isArray(e)}function d(e){return!r(e)&&(f(e)&&e.length>0)}new Map([["Image",["png","jpeg","jpg","png","bmp"]],["Video",["mp4","webm","ogg"]],["PDF",["pdf"]],["Word",["doc","docx"]],["Excel",[".xlsx",".xls",".csv"]]]);const g="undefined"!=typeof window,v=e=>"boolean"==typeof e;g&&window?.navigator?.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}}]);