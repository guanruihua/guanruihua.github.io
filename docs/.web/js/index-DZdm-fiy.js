import{c as m,R as u,j as h}from"./index-CEV2tErd.js";import{u as C}from"./index.esm-DkjyXxMi.js";import{c as p}from"./index.esm-Bg5LkWwD.js";const b=()=>{const e=m.c(4),[o,s]=u.useState(null);let i,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{const t=document.createElement("script");return t.src="/js/phaser.min.js",t.onload=()=>{console.log("Phaser","/js/phaser.min.js","已加载");const n=window.Phaser;s(n)},document.body.appendChild(t),()=>{document.body.removeChild(t)}},a=[],e[0]=i,e[1]=a):(i=e[0],a=e[1]),u.useEffect(i,a);let A;return e[2]!==o?(A={Phaser:o},e[2]=o,e[3]=A):A=e[3],A},w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADWElEQVRYR82XT0iaYRzHf1nrDcykYHZQ89AOpTvYH2Ps0ha+2pAtsFSGQpei1EuwsTXYoUNbsLlu0+lZopfy9S3KYcIO7rA1jeqgEayD9IeYh4boIGduPKHj7Y+mpbYHnsvL8/y+n+fP+3u+vzK45lZ2zfpwGQAGAFQDQEWqozUkUj0KAMl8FpUPAMdsNssaGhq6BQJBY2VlZQ2TyRQisVgsFozH45FQKLQVCoU+Go1GDwD8yAXkQgCdTndLqVQ+kUgkj2tra9lMJjNr3Gg0CgcHBxG/3z9FkuQ7u93+PduErAAWi0WrUCjec7lcNoOBdj73lkwmYXd3N7KwsGA0GAz2TDMzApAk+UEqlQ6xWKzcVc8ZiXbE5XJZNRqNHgD+nB5yLoDL5bLLZDJteXn5lcTpk0mStPb29g5fCEAQxIuenp7XGIYVTBwFOjo6gunp6Zc6ne4VPfCJHTCZTBKNRuPh8Xjsgqqngu3v70esVqt8bGzsazo+HYDh8XicUqn0UTHE0zG9Xu9cZ2enGgDi6Ns/gPHx8Y7BwcFlDodTTH0Ih8Og1+tvOxyOwAkAiqIm5HL5aFVVVVEBEokEOJ3Ot2q1+hkdAFtZWfnc2toqKap6Kvj6+vo3sVh8HwB+pY+AHQgEvgiFwuZSAASDwWWRSNQNAD/TAM0+ny/Y3t5eCn3Y2dkBPp9fj96L/wagpEewubm50dTUdJd+BJjf7/e2tbV1lOIM1tbWfC0tLffolxDm5+cncBwvyW9IUdQblUr1/EwiGhgYWK6vR3ejeA0lIqPRKJqZmQmeAEBZcWlpaQ7H8YfFkwfImIqR6OTkZLtKpfrE4/GuZgIyrAA9RiMjI3cIgtg47zE6/jY7OzuqUCgmCp2SUQomCCL7c5ymQoYEx3FtRQUyvoVpDofD1tfXN3Q6WkZLRlGUpaura7gQlsztdiNx5IZys2RpSpvNppXL5WYul1uTrz1DDmhvb+/ypjQN0d/f36hUKp+KxWJtXV0dq7oa1SSZW9qWr66uTi0uLppsNttWtvEX1gW0yTfNZrNcIBA84PP5jRiGocLk+PWMxWIbh4eHke3t7ePCxGAwuAEgnMvtyQeA/ueg6uRGqqPvv2ml2ZlzLtQO5LKgvMdcZgfyFsk24S9lFT4wKlkIVgAAAABJRU5ErkJggg==",E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAACNklEQVR4Xu2av2sUQRTHPxMlKSMWFuaEzNSidtqJlba2gkUa7YKWgvgDjK1iYSso+Adoo41ip52K9c4ELxYWomUOzZNFD7NxL1lud9l37LvuYN/3fd/3fZmdnXkO+/VaAdfr6q14zAA9N4EZwAzQcwV6Xr6tAGaAigqk5IEziBwHjgKHgUPAwYoI9lg7CnwDvgJfgE/Ae+A13qcq6fZeAVI6j8hl4GwVQHtGjQIvEHlICM93YzTZAFl2DOceAKfVlGREplHgDSKrhPCxLLjcACldQOQxsG+ajBajToFfiKwQwpOdzIoGEHGktAZcU1eCEaqvgMgdvL+BczIGKxogxivAvfqZDEGxAlfx/v7/BhgOB4xGEef2KyZv1OoqIPKThYXA0tLnHOrfChDjLeBmXXyLnwkFbuN93u+CAd4CJ2eCvpGsq8A7vD9VNECWfce5xbrIFj8DCoj8IIQDZoAZ6FUrFEsNEKO9AlpRWyVoySvANoEqO9USqZJN4MbGETY3M/sMbElyLbD5Z+D8vGcwGBb3APk/OwjS0qY2eUw4CBqnjPGuHQW3qX+H2CJrhHB9O4Pyy6Asu4hzj+wyqMNmNZlaZMTc3ArLy093wtp1cJNC68Sa4jp4eyF/BkIuAed01mesJijw8u9AyLPdFNp7Imgcvb4e2NrKh0NO2EiYKtMVR8Kc+4DIq+ZGwlTVamSaVqD6CtB0ZsNToYAZQEUbuiNhBuhOexWZzQAq2tAdCTNAd9qryPwbDLSNIRutIXsAAAAASUVORK5CYII=",B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAABHUlEQVRoQ+1YMU7DQBCcNW6gCQWBC8oboIUHIBR/IQ1NxA+QcJo0iQQ/QFRIfAEjv4Ak74jEBUehR44X2bKtXPID7153umrmZvbmhiB8kXD8UAJUAcIZUAtsCyB4/jFIs1cwX4HopFHiYF4x6CvDwX08bH9X2GoF3I6TjkfpnEDdRgHfAcPgRfZ3dBmPWuv8qCagN7HvBPSbDL7CxuC3z7Bz5xAQjK0F4UwCAWAso6ExLgETyyLAlyCj0BTqry0QKAGqALWAzgBBDOgQ1FdAn0HNARqENAluR2HpnyHx3+Gbp+Tc36QzCYWIR4cXH4/Hv84QzDdFK4TNC4Gvm1iJgWgK3xtED6d2rxITlIIdqNoKS715tUDJgFpAugX+AQq1eSEk5u3wAAAAAElFTkSuQmCC",v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAA1klEQVRoQ+2YyQkCQRREX+UguGAMetVYvHgRYxJPgrm4xCGoIBpCy8w40iNG0L/61vTpFVX9FxH8KDg/FsAOCK6AI5AbICUGwBaYAb3CzPEADsBa4tqyfR2QEkPgDIwLA//FuQBTiWf1kAuwBxaFw7d4O4nlrwA3oB9EgLtUx73jgBQEvsaUGvY8AhbADgikgCPgP8CfoKuAy6D7ADdC7gTzVjj8MBR+HB4BpyALkYnEq1MGq8tnK7QB5oWuxI7ASqKKezMWB5p//qJaADsguAKOQHAD8Ab+DUohDbkfzgAAAABJRU5ErkJggg==",Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgCAYAAACinX6EAAAA4ElEQVRoQ+2YywkCQRBEX+cg+MEY9KqxePEixiSeBHPxE4eggmgII+vuyH4y2Kq9DXt6NV1d0x2IfyHOjwVwBYgrYAvUCyDBCNgDC2DQs+J4ASdgG3DPbP8KSDAGrsC0Z+BtnBswD3gXP+oCHIFVz+Ez3iFg3RbgAQxFBHhGafdGBSQR+B9mVOx1C1gAV4CQAraAe0AZAG6C2fYJnAJCPdDvAKeAU6CbAvLDkPw4PAEuIguRWcCn8RAqDtVWaAcse7oSOwObgMLueSxWSv8uq7fC2vdfG4ZUhbAFVG8+c38Bg2c2IUXq5tUAAAAASUVORK5CYII=";function x(){this.load.image("ball",w),this.load.image("paddle",E),this.load.image("brick1",B),this.load.image("brick2",v),this.load.image("brick3",Q)}function D(e,o){o.disableBody(!0,!0);let s=0;e.body.velocity.x==0&&(s=Math.random(),s>=.5?e.setVelocityX(150):e.setVelocityX(-150))}function I(e,o){e.setVelocityY(e.body.velocity.y-5);let s=Math.abs(e.body.velocity.x)+5;e.x<o.x?e.setVelocityX(-s):e.setVelocityX(s)}function G(e,o){return!e?.body||!o?.bounds?!1:e.body.y>o.bounds.height}function V(e){let o=-1;return e.forEach(s=>{if(s){if(o===-1){o=s.countActive();return}o+=s.countActive()}}),o===0}const k=(e,o)=>[e.physics.add.group({key:"brick1",repeat:4,immovable:!0,setXY:{x:80,y:40,stepX:70}}),e.physics.add.group({key:"brick2",repeat:4,immovable:!0,setXY:{x:80,y:90,stepX:70}}),e.physics.add.group({key:"brick3",repeat:4,immovable:!0,setXY:{x:80,y:140,stepX:70}})],F=e=>{const o=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"Press SPACE to Start",{fontFamily:"Monaco, Courier, monospace",fontSize:"12px"});o.setOrigin(.5);const s=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"Game Over",{fontFamily:"Monaco, Courier, monospace",fontSize:"50px",color:"#F60000"});s.setOrigin(.5),s.setVisible(!1);const i=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"You won!",{fontFamily:"Monaco, Courier, monospace",fontSize:"50px"});return i.setOrigin(.5),i.setVisible(!1),{opening:o,gameOver:s,playerWon:i}},N=e=>{const s=(()=>{const{width:r,height:d}=e;return{...e,width:p(r)?r:Number(r),height:p(d)?d:Number(d)}})(),{width:i,height:a}=s;let A=null,t=null,n=[],c=null,l=!1,g={opening:null,gameOver:null,playerWon:null};function y(){const r=this;A=r.physics.add.sprite(i/2,a-20,"paddle"),t=r.physics.add.sprite(i/2,a-40,"ball"),n=k(r),c=r.input.keyboard?.createCursorKeys(),A.setCollideWorldBounds(!0),t.setCollideWorldBounds(!0),t.setBounce(1,1),r.physics.world.checkCollision.down=!1,n.forEach(d=>{t&&d&&r.physics.add.collider(t,d,D,void 0,r)}),A.setImmovable(!0),r.physics.add.collider(t,A,I,void 0,r),g=F(r)}function f(){!A?.body||!t||!c||(G(t,this.physics.world)?(g.gameOver?.setVisible(!0),t.disableBody(!0,!0)):V(n)?(g.playerWon?.setVisible(!0),t.disableBody(!0,!0)):(A.setVelocityX(0),c.left.isDown?A.setVelocityX(-350):c.right.isDown&&A.setVelocityX(350),l||(t.setX(A.x),c.space.isDown&&(l=!0,t.setVelocityY(-200),g.opening?.setVisible(!1)))))}return{key:"game",preload:x,create:y,update:f}},U="/.web/assets/bg2-DH07apjA.jpg";function Y(){this.load.image("bg",U)}const R=e=>{let o=null;const s=()=>{const{width:t,height:n}=e;return{...e,width:p(t)?t:Number(t),height:p(n)?n:Number(n)}},{width:i,height:a}=s();function A(){const t=this;t.cameras.main.setBackgroundColor("#111111");const n=t.add.image(i,a,"bg").setOrigin(.5).setDepth(-1),c=Math.max(i/n.width,a/n.height);n.setScale(c).setPosition(i/2,a/2),n.setAlpha(.3);const l={fontSize:"32px"};o=t.add.text(i/2,a/2,"Start",{...l,color:"#FFFFFF"}).on("pointerover",()=>{o?.setStyle({...l,fill:"#8FB4F8"}),t.sys.canvas.classList.add("pointer")}).on("pointerout",()=>{o?.setStyle({...l,fill:"#FFFFFF"}),t.sys.canvas.classList.remove("pointer")}).setOrigin(.5).setInteractive().on("pointerdown",()=>{t.scene.stop("menu"),t.scene.start("game")}),t.scene.stop("menu"),t.scene.start("game")}return{key:"menu",active:!0,create:A,preload:Y}},S=(e,o)=>{console.log(e);const s={type:e.WEBGL,backgroundColor:"#000000",width:window.innerWidth,height:window.innerHeight,parent:o,scale:{},scene:[],physics:{default:"arcade"}};s.scene=[R(s),N(s)],new e.Game(s)},K=()=>{const e=u.useRef(null),{Phaser:o}=b(),[s,i]=C({});return u.useEffect(()=>{!o||!e.current||S(o,e.current)},[o,e.current]),{containerRef:e,state:s,setState:i}};function H(){const e=K();return h.jsx("div",{className:"game__brick",children:h.jsx("div",{ref:e.containerRef})})}export{H as default};
