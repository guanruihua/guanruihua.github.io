"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[867],{6867:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var l=n(6540),r=n(7317);const o=()=>{const[e,t]=(0,r.xI)({selectFileType:"",review:""},"dev/file-review|cache");return{state:e,setState:t}};var a=n(9108),u=n(306),c=(e,t,n)=>new Promise((l,r)=>{var o=e=>{try{u(n.next(e))}catch(e){r(e)}},a=e=>{try{u(n.throw(e))}catch(e){r(e)}},u=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,a);u((n=n.apply(e,t)).next())});const i=e=>c(null,null,function*(){return new Promise(t=>c(null,null,function*(){if(!(0,a.Kg)(e.name))return;const n=e.name.split(".").at(-1),l=new FileReader;if(l.onerror=function(){t("")},["md","txt"].includes(n))return l.onload=function(e){var n;const l=(null==(n=e.target)?void 0:n.result)||"";(0,a.Kg)(l)&&t(l)},void l.readAsText(e);if(["docx"].includes(n))return l.onload=function(e){var n;const l=(null==(n=e.target)?void 0:n.result)||"";u.extractRawText({arrayBuffer:l}).then(e=>{console.log(e),t((null==e?void 0:e.value)||"")}).catch(()=>{t("")})},void l.readAsArrayBuffer(e);if(["pdf"].includes(n)){const n=(e,t)=>c(null,null,function*(){const n=yield e.getPage(t),l=yield n.getTextContent(),r=[];let o="",a=-1;l.items.map(e=>{const{str:t,hasEOL:n}=e;return n?(o.length>a&&(a=o.length),r.push(o),o=""):o+=t,t});let u="",c=3*a/5;return r.forEach((e,t)=>{e.length<c?u=u+e+"\n":u+=e}),u});return l.onload=e=>c(null,null,function*(){var l;try{const r=(null==(l=e.target)?void 0:l.result)||"",o=yield window.pdfjsLib.getDocument(r).promise,a=[];console.log(o);for(let e=1;e<=o.numPages;e++)a.push(n(o,e));const u=yield Promise.all(a);console.log(u),t(u.join("\n"))}catch(e){console.error(e),t("")}}),void l.readAsArrayBuffer(e)}t("")}))});var s=(e,t,n)=>new Promise((l,r)=>{var o=e=>{try{u(n.next(e))}catch(e){r(e)}},a=e=>{try{u(n.throw(e))}catch(e){r(e)}},u=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,a);u((n=n.apply(e,t)).next())});function d(){const{state:e,setState:t}=o();return l.createElement("div",{className:"tool-file-review"},l.createElement("div",{className:"content"},l.createElement("div",{className:"controls"},l.createElement("h5",null,"md, txt, docx, pdf"),l.createElement("input",{type:"file",onChange:e=>{var n;(e=>{s(null,null,function*(){const n=yield i(e);console.log(n),t({review:n})})})(null==(n=e.target.files)?void 0:n[0])}})),l.createElement("div",{className:"review"},l.createElement("pre",null,e.review))))}}}]);