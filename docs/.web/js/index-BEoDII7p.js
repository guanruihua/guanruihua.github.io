import{c as w,R as L,j as c,g as C,i as D,k as B}from"./index-CjABcFaQ.js";import{u as q,a as O}from"./index.esm-B4OhX0iS.js";import{i as M,d as z,b as W,c as A}from"./index.esm-DEqtexvw.js";import{g as H}from"./index.esm-vp3mBawv.js";const T=32,F=T*8,I=[{id:"3",type:"deepseek",dataType:"chat-model"},{id:"4",type:"database",dataType:"memory"},{id:"5",type:"RSS",dataType:"tool"},{id:"6",type:"RSS",dataType:"tool"},{id:"7",type:"RSS",dataType:"tool"},{id:"8",type:"RSS",dataType:"tool"},{id:"9",type:"RSS",dataType:"tool"}].map((s,e)=>(s.row=1,s.x=3+e*5,s)),P=[{id:"1",type:"workflow-start",row:0,x:10,edge:"2"},{id:"2",type:"agent",dataType:"agent",label:"AI Agent",nextLabel:"Tools Agent",row:0,x:21,edge:{"chat-model":"3",memory:"4",tool:"5,6,7,8,9"}},...I],V=s=>{const e=[],o=(i,d,a="default")=>{if(!i||!M(d))return;d.split(",").forEach(l=>{const t=i,r=l;e.push({id:`${i}-${l}`,start:t,end:r,type:a})})};return s.forEach(i=>{const{id:d,to:a,edge:n}=i;if(d){if(M(a))return o(d,a);if(M(n))return o(d,n);if(z(n))for(const l in n){const t=n[l];M(t)&&o(d,t,l)}}}),e},G=(s,e)=>{if(!s.current||!W(e))return[];const o=s.current.getBoundingClientRect(),i=o.left,d=o.top,a={},n={},l=f=>{if(n[f])return n[f];const m=document.querySelector(f);if(m){const g=m.getBoundingClientRect();if(g)return n[f]=g,g}return o},t=f=>{const m=l(f);return{rect:m,top:[-i+m.left+m.width/2,-d+m.top],right:[-i+m.right,-d+m.top+m.height/2],bottom:[-i+m.left+m.width/2,-d+m.bottom],left:[-i+m.left,-d+m.top+m.height/2]}},r=(f,m)=>{const g=t(`.d-node-handle[data-id="${f.id}"][data-type="${m.dataType}"]`),p=t(`.d-node[data-id="${m.id}"]`),x=g.bottom[0],y=g.bottom[1],b=p.top[0],j=p.top[1],v=Math.abs(j-y)*3/5,S=(b-x)*2/5;return{className:"hidden-arrow dash-flow reverse-flow",d:`M ${x} ${y} C ${x+S} ${y+v}, ${b} ${j-v}, ${b} ${j-8}`}},u=(f,m)=>{let g=0,p=0,x=0,y=0;const b=t(`.d-node[data-id="${f}"]`),j=t(`.d-node[data-id="${m}"]`);if(Math.abs(b.rect.top-j.rect.top)<3?(g=b.right[0],p=b.right[1],x=j.left[0],y=j.left[1]):(g=b.bottom[0],p=b.bottom[1],x=j.top[0],y=j.top[1]),Math.abs(p-y)<1)return{d:`M ${g} ${p} ${x-8} ${y}`};const v=Math.abs(y-p)*3/5,S=(x-g)*2/5;return{d:`M ${g} ${p} C ${g+S} ${p+v}, ${x} ${y-v}, ${x} ${y-8}`}};return e.forEach(f=>{a[f.id]=f}),V(e).map(f=>{const m=a[f.start],g=a[f.end];return m.dataType==="agent"&&g.dataType?{...f,...r(m,g)}:{...f,...u(f.start,f.end)}})},J=s=>{const e=w.c(15),{nodes:o}=s,i=L.useRef(null);let d,a,n,l,t;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],a={x:900,y:58},n={},l={},t={1:"success","1-2":"success",2:"error","2-3":"error",3:"error",4:"success",5:"success",6:"success",7:"success",8:"success"},e[0]=d,e[1]=a,e[2]=n,e[3]=l,e[4]=t):(d=e[0],a=e[1],n=e[2],l=e[3],t=e[4]);let r;e[5]===Symbol.for("react.memo_cache_sentinel")?(r={open:!1,node:{}},e[5]=r):r=e[5];let u;e[6]!==o?(u={nodes:o,edges:d,offset:a,rootRect:n,nodeRect:l,status:t,dialog:r,lastUpdate:0},e[6]=o,e[7]=u):u=e[7];const[h,f]=q(u);let m;e[8]!==o||e[9]!==f||e[10]!==h?(m=()=>{const x={...h,rootRect:i.current.getBoundingClientRect(),edges:G(i,o),lastUpdate:Date.now()};f(x)},e[8]=o,e[9]=f,e[10]=h,e[11]=m):m=e[11],O("resize",m);let p;return e[12]!==f||e[13]!==h?(p={rootRef:i,state:h,setState:f},e[12]=f,e[13]=h,e[14]=p):p=e[14],p},U=["workflow-start","agent","deepseek","database","RSS"];E.includes=s=>U.includes(s);function E(s){const e=w.c(27);let o,i,d;e[0]!==s?({type:d,style:i,...o}=s,e[0]=s,e[1]=o,e[2]=i,e[3]=d):(o=e[1],i=e[2],d=e[3]);let a;e[4]!==i?(a={minWidth:30,fontSize:24,...i},e[4]=i,e[5]=a):a=e[5];const n=a;if(d==="RSS"){let t;e[6]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("path",{d:"M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"}),c.jsx("circle",{cx:"5",cy:"19",r:"1"})]}),e[6]=t):t=e[6];let r;return e[7]!==o||e[8]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"rss",style:n,...o,children:t}),e[7]=o,e[8]=n,e[9]=r):r=e[9],r}if(d==="database"){let t;e[10]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),c.jsx("path",{d:"M3 5v14a9 3 0 0 0 18 0V5"}),c.jsx("path",{d:"M3 12a9 3 0 0 0 18 0"})]}),e[10]=t):t=e[10];let r;return e[11]!==o||e[12]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"database",style:n,...o,children:t}),e[11]=o,e[12]=n,e[13]=r):r=e[13],r}if(d==="deepseek"){let t;e[14]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx("path",{d:"M23.748 4.482c-.254-.124-.364.113-.512.234-.051.039-.094.09-.137.136-.372.397-.806.657-1.373.626-.829-.046-1.537.214-2.163.848-.133-.782-.575-1.248-1.247-1.548-.352-.156-.708-.311-.955-.65-.172-.241-.219-.51-.305-.774-.055-.16-.11-.323-.293-.35-.2-.031-.278.136-.356.276-.313.572-.434 1.202-.422 1.84.027 1.436.633 2.58 1.838 3.393.137.093.172.187.129.323-.082.28-.18.552-.266.833-.055.179-.137.217-.329.14a5.526 5.526 0 01-1.736-1.18c-.857-.828-1.631-1.742-2.597-2.458a11.365 11.365 0 00-.689-.471c-.985-.957.13-1.743.388-1.836.27-.098.093-.432-.779-.428-.872.004-1.67.295-2.687.684a3.055 3.055 0 01-.465.137 9.597 9.597 0 00-2.883-.102c-1.885.21-3.39 1.102-4.497 2.623C.082 8.606-.231 10.684.152 12.85c.403 2.284 1.569 4.175 3.36 5.653 1.858 1.533 3.997 2.284 6.438 2.14 1.482-.085 3.133-.284 4.994-1.86.47.234.962.327 1.78.397.63.059 1.236-.03 1.705-.128.735-.156.684-.837.419-.961-2.155-1.004-1.682-.595-2.113-.926 1.096-1.296 2.746-2.642 3.392-7.003.05-.347.007-.565 0-.845-.004-.17.035-.237.23-.256a4.173 4.173 0 001.545-.475c1.396-.763 1.96-2.015 2.093-3.517.02-.23-.004-.467-.247-.588zM11.581 18c-2.089-1.642-3.102-2.183-3.52-2.16-.392.024-.321.471-.235.763.09.288.207.486.371.739.114.167.192.416-.113.603-.673.416-1.842-.14-1.897-.167-1.361-.802-2.5-1.86-3.301-3.307-.774-1.393-1.224-2.887-1.298-4.482-.02-.386.093-.522.477-.592a4.696 4.696 0 011.529-.039c2.132.312 3.946 1.265 5.468 2.774.868.86 1.525 1.887 2.202 2.891.72 1.066 1.494 2.082 2.48 2.914.348.292.625.514.891.677-.802.09-2.14.11-3.054-.614zm1-6.44a.306.306 0 01.415-.287.302.302 0 01.2.288.306.306 0 01-.31.307.303.303 0 01-.304-.308zm3.11 1.596c-.2.081-.399.151-.59.16a1.245 1.245 0 01-.798-.254c-.274-.23-.47-.358-.552-.758a1.73 1.73 0 01.016-.588c.07-.327-.008-.537-.239-.727-.187-.156-.426-.199-.688-.199a.559.559 0 01-.254-.078c-.11-.054-.2-.19-.114-.358.028-.054.16-.186.192-.21.356-.202.767-.136 1.146.016.352.144.618.408 1.001.782.391.451.462.576.685.914.176.265.336.537.445.848.067.195-.019.354-.25.452z",fill:"#4D6BFE"}),e[14]=t):t=e[14];let r;return e[15]!==o||e[16]!==n?(r=c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:n,...o,children:t}),e[15]=o,e[16]=n,e[17]=r):r=e[17],r}if(d==="agent"){let t;e[18]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("path",{d:"M12 8V4H8"}),c.jsx("rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}),c.jsx("path",{d:"M2 14h2m16 0h2m-7-1v2m-6-2v2"})]}),e[18]=t):t=e[18];let r;return e[19]!==o||e[20]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"robot",style:n,...o,children:t}),e[19]=o,e[20]=n,e[21]=r):r=e[21],r}if(d==="workflow-start"){let t;e[22]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx("path",{fill:"none",style:{color:"#f76b56"},stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m16 17l5-5l-5-5m5 5H9m0 9H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e[22]=t):t=e[22];let r;return e[23]!==o||e[24]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"sign-out-alt",style:n,...o,children:t}),e[23]=o,e[24]=n,e[25]=r):r=e[25],r}let l;return e[26]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(c.Fragment,{}),e[26]=l):l=e[26],l}const X=s=>{const e=w.c(28),{id:o,type:i}=s;let d;e[0]!==o?(d={className:"d-node-handle","data-id":o},e[0]=o,e[1]=d):d=e[1];const a=d;if(["deepseek","database","RSS"].includes(i)){let l;return e[2]!==a?(l=c.jsx("div",{...a,"data-location":"top","data-shape":"rotate-square"}),e[2]=a,e[3]=l):l=e[3],l}if(i==="workflow-start"){let l;return e[4]!==a?(l=c.jsx("div",{...a,"data-location":"right"}),e[4]=a,e[5]=l):l=e[5],l}if(i==="agent"){let l,t;e[6]!==a?(l=c.jsx("div",{...a,"data-location":"right"}),t=c.jsx("div",{...a,"data-location":"bottom","data-type":"chat-model","data-shape":"rotate-square"}),e[6]=a,e[7]=l,e[8]=t):(l=e[7],t=e[8]);let r;e[9]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx("span",{className:"label-required",children:"*"}),e[9]=r):r=e[9];let u,h,f,m,g,p;e[10]!==a?(h=c.jsxs("div",{...a,"data-location":"bottom","data-type":"chat-model-label","data-flag":"label",children:["Chat Model",r]}),f=c.jsx("div",{...a,"data-location":"bottom","data-type":"memory","data-shape":"rotate-square"}),m=c.jsx("div",{...a,"data-location":"bottom","data-type":"memory-label","data-flag":"label",children:"Memory"}),g=c.jsx("div",{...a,"data-location":"bottom","data-type":"tool","data-shape":"rotate-square"}),p=c.jsx("div",{...a,"data-location":"bottom","data-type":"tool-label","data-flag":"label",children:"Tool"}),u=c.jsx("div",{...a,"data-location":"left","data-shape":"square"}),e[10]=a,e[11]=u,e[12]=h,e[13]=f,e[14]=m,e[15]=g,e[16]=p):(u=e[11],h=e[12],f=e[13],m=e[14],g=e[15],p=e[16]);let x;return e[17]!==u||e[18]!==l||e[19]!==t||e[20]!==h||e[21]!==f||e[22]!==m||e[23]!==g||e[24]!==p?(x=c.jsxs(L.Fragment,{children:[l,t,h,f,m,g,p,u]}),e[17]=u,e[18]=l,e[19]=t,e[20]=h,e[21]=f,e[22]=m,e[23]=g,e[24]=p,e[25]=x):x=e[25],x}let n;return e[26]!==a?(n=c.jsxs(L.Fragment,{children:[c.jsx("div",{...a,"data-location":"top"}),c.jsx("div",{...a,"data-location":"right"}),c.jsx("div",{...a,"data-location":"bottom"}),c.jsx("div",{...a,"data-location":"left"})]}),e[26]=a,e[27]=n):n=e[27],n},Y=s=>{const e=w.c(25);let o,i,d,a;e[0]!==s?({state:d,item:o,style:a,...i}=s,e[0]=s,e[1]=o,e[2]=i,e[3]=d,e[4]=a):(o=e[1],i=e[2],d=e[3],a=e[4]);const{id:n,type:l,label:t,nextLabel:r,x:u,y:h,row:f}=o,m=t===void 0?"":t,g=r===void 0?"":r,p=u===void 0?0:u,x=h===void 0?0:h,y=A(f)?f*F:x*T,b=p*T+10,j=y+30,v=d?.status?.[n]??"default",S=`translate(${b}px, ${j}px)`;let $;e[5]!==a||e[6]!==S?($={transform:S,...a},e[5]=a,e[6]=S,e[7]=$):$=e[7];let _;e[8]!==l?(_=E.includes(l)&&c.jsx(E,{type:l}),e[8]=l,e[9]=_):_=e[9];let k;e[10]!==m||e[11]!==g?(k=m&&c.jsxs(C,{className:"d-node-label-container",children:[c.jsx(C,{className:"label",children:m}),c.jsx(C,{className:"next-label",none:!g,children:g})]}),e[10]=m,e[11]=g,e[12]=k):k=e[12];let R;e[13]!==n||e[14]!==l?(R=c.jsx(X,{id:n,type:l}),e[13]=n,e[14]=l,e[15]=R):R=e[15];let N;return e[16]!==n||e[17]!==i||e[18]!==v||e[19]!==$||e[20]!==_||e[21]!==k||e[22]!==R||e[23]!==l?(N=c.jsxs("div",{className:"d-node","data-id":n,"data-type":l,"data-status":v,style:$,...i,children:[_,k,R]}),e[16]=n,e[17]=i,e[18]=v,e[19]=$,e[20]=_,e[21]=k,e[22]=R,e[23]=l,e[24]=N):N=e[24],N},Z=s=>{const e=w.c(9),{state:o}=s;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[["arrowhead","#c2c8d5"],["arrowhead-hover","red"],["arrowhead-success","#3da463"],["arrowhead-error","#ea6872"],["arrowhead-warning","#fab355"]],e[0]=i):i=e[0];const d=i;let a;e[1]!==o?(a=u=>{const{id:h,start:f,end:m}=u;if(o?.status?.[h])return o.status[h];const g=o?.status?.[f]??"default",p=o?.status?.[m]??"default";return[g,p].includes("default")?"default":[g,p].includes("error")?"error":"default"},e[1]=o,e[2]=a):a=e[2];const n=a;let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("defs",{children:d.map(K)}),e[3]=l):l=e[3];let t;e[4]!==n||e[5]!==o?.edges?(t=o?.edges.map(u=>{const{id:h,d:f,className:m}=u;return c.jsx("path",{className:H("d-edge",m),"data-status":n(u),d:f,fill:"none"},h)}),e[4]=n,e[5]=o?.edges,e[6]=t):t=e[6];let r;return e[7]!==t?(r=c.jsxs("svg",{className:"dev__diagram-edge-container",children:[l,t]}),e[7]=t,e[8]=r):r=e[8],r};function K(s){const[e,o]=s;return c.jsx("marker",{id:e,markerWidth:"3.5",markerHeight:"2.5",refX:"1",refY:"1.25",orient:"auto",children:c.jsx("path",{d:"M0,0 L2.5,1.25 L0,2.5 Z",fill:o})},e)}function Q(s){const e=w.c(16),{state:o,setState:i}=s;let d;e[0]!==o.dialog?(d=o.dialog||{},e[0]=o.dialog,e[1]=d):d=e[1];const{open:a,node:n}=d;let l;e[2]!==n?(l=n===void 0?{}:n,e[2]=n,e[3]=l):l=e[3];const t=l;let r;if(e[4]!==t||e[5]!==a||e[6]!==i){let u;e[8]!==i?(u=()=>{i({dialog:{open:!1,node:{}}})},e[8]=i,e[9]=u):u=e[9];let h;e[10]!==t?(h=JSON.stringify(t),e[10]=t,e[11]=h):h=e[11];let f;e[12]!==a||e[13]!==u||e[14]!==h?(f=c.jsx(B,{className:"diagram-dialog",open:a,onCancel:u,children:h}),e[12]=a,e[13]=u,e[14]=h,e[15]=f):f=e[15],r=D.createPortal(f,document.body),e[4]=t,e[5]=a,e[6]=i,e[7]=r}else r=e[7];return r}function oe(){const s=w.c(19);let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e={nodes:P},s[0]=e):e=s[0];const{rootRef:o,state:i,setState:d}=J(e);let a;s[1]!==i?(a=c.jsx(Z,{state:i}),s[1]=i,s[2]=a):a=s[2];let n;s[3]!==d||s[4]!==i?(n=i.nodes.map((h,f)=>c.jsx(Y,{item:h,state:i,onClick:()=>{console.log(h),d({dialog:{open:!0,node:h}})}},f)),s[3]=d,s[4]=i,s[5]=n):n=s[5];let l;s[6]!==n?(l=c.jsx("div",{className:"dev__diagram-node-container",children:n}),s[6]=n,s[7]=l):l=s[7];let t;s[8]!==i.dialog?(t=JSON.stringify(i.dialog),s[8]=i.dialog,s[9]=t):t=s[9];let r;s[10]!==d||s[11]!==i||s[12]!==t?(r=c.jsx(Q,{state:i,setState:d},t),s[10]=d,s[11]=i,s[12]=t,s[13]=r):r=s[13];let u;return s[14]!==o||s[15]!==a||s[16]!==l||s[17]!==r?(u=c.jsxs("div",{className:"dev__diagram",ref:o,children:[a,l,r]}),s[14]=o,s[15]=a,s[16]=l,s[17]=r,s[18]=u):u=s[18],u}export{oe as default};
