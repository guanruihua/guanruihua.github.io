import{r as i}from"./index-BSiT3j47.js";function c(t){return t==null||t!==t}function y(t){return typeof t!="object"||c(t)?!1:/Iterator\]$/.test(t.toString())}function a(t){try{if(y(t))return"Iterator";const e=Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1];return e==="Number"&&isNaN(t)?"NaN":e}catch{return"Undefined"}}function N(t){return typeof t=="string"}const m=t=>typeof t=="number"&&a(t)==="Number";function b(t){return Array.isArray(t)}function g(t){return c(t)?!1:b(t)&&t.length>0}function I(t={},e,s=localStorage){const[u,S]=i.useState(t),f=r=>{if(S(r),!!e)try{s.setItem(e,JSON.stringify(r))}catch(o){console.warn(o);return}};return i.useEffect(()=>{if(e)try{const r=s.getItem(e);if(!r||r==="{}")return;f(JSON.parse(r))}catch{return}},[e,s]),[u,(r,o=!1)=>{const n=typeof r=="function"?r(u):r;f(o?n:{...u,...n})},r=>{if(g(r)){const o={...u};r.forEach(n=>{(N(n)||m(n))&&(o[n]=t[n])}),f(o);return}f(t)}]}export{I as u};
