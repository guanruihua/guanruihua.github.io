import{c as w,R as T,j as c,g as L,p as B,H as q}from"./index-LWT-uAME.js";import{u as O,a as z}from"./index.esm-BTlgqCB2.js";import{i as M,h as H,b as W,c as A}from"./index.esm-Bg5LkWwD.js";import{g as F}from"./index.esm-vp3mBawv.js";const E=32,I=E*8,P=[{id:"3",type:"deepseek",dataType:"chat-model"},{id:"4",type:"database",dataType:"memory"},{id:"5",type:"RSS",dataType:"tool"},{id:"6",type:"RSS",dataType:"tool"},{id:"7",type:"RSS",dataType:"tool"},{id:"8",type:"RSS",dataType:"tool"},{id:"9",type:"RSS",dataType:"tool"}].map((a,e)=>(a.row=1,a.x=3+e*5,a)),V=[{id:"1",type:"workflow-start",row:0,x:10,edge:"2"},{id:"2",type:"agent",dataType:"agent",label:"AI Agent",nextLabel:"Tools Agent",row:0,x:21,edge:{"chat-model":"3",memory:"4",tool:"5,6,7,8,9"}},...P],G=a=>{const e=[],o=(r,f,s="default")=>{if(!r||!M(f))return;f.split(",").forEach(i=>{const t=r,n=i;e.push({id:`${r}-${i}`,start:t,end:n,type:s})})};return a.forEach(r=>{const{id:f,to:s,edge:l}=r;if(f){if(M(s))return o(f,s);if(M(l))return o(f,l);if(H(l))for(const i in l){const t=l[i];M(t)&&o(f,t,i)}}}),e},J=(a,e)=>{if(!a.current||!W(e))return[];const o=a.current.getBoundingClientRect(),r=o.left,f=o.top,s={},l={},i=m=>{if(l[m])return l[m];const d=document.querySelector(m);if(d){const g=d.getBoundingClientRect();if(g)return l[m]=g,g}return o},t=m=>{const d=i(m);return{rect:d,top:[-r+d.left+d.width/2,-f+d.top],right:[-r+d.right,-f+d.top+d.height/2],bottom:[-r+d.left+d.width/2,-f+d.bottom],left:[-r+d.left,-f+d.top+d.height/2]}},n=(m,d)=>{const g=t(`.d-node-handle[data-id="${m.id}"][data-type="${d.dataType}"]`),p=t(`.d-node[data-id="${d.id}"]`),x=g.bottom[0],y=g.bottom[1],b=p.top[0],j=p.top[1],v=Math.abs(j-y)*3/5,S=(b-x)*2/5;return{className:"hidden-arrow dash-flow reverse-flow",d:`M ${x} ${y} C ${x+S} ${y+v}, ${b} ${j-v}, ${b} ${j-8}`}},u=(m,d)=>{let g=0,p=0,x=0,y=0;const b=t(`.d-node[data-id="${m}"]`),j=t(`.d-node[data-id="${d}"]`);if(Math.abs(b.rect.top-j.rect.top)<3?(g=b.right[0],p=b.right[1],x=j.left[0],y=j.left[1]):(g=b.bottom[0],p=b.bottom[1],x=j.top[0],y=j.top[1]),Math.abs(p-y)<1)return{d:`M ${g} ${p} ${x-8} ${y}`};const v=Math.abs(y-p)*3/5,S=(x-g)*2/5;return{d:`M ${g} ${p} C ${g+S} ${p+v}, ${x} ${y-v}, ${x} ${y-8}`}};return e.forEach(m=>{s[m.id]=m}),G(e).map(m=>{const d=s[m.start],g=s[m.end];return d.dataType==="agent"&&g.dataType?{...m,...n(d,g)}:{...m,...u(m.start,m.end)}})},U=a=>{const e=w.c(15),{nodes:o}=a,r=T.useRef(null);let f,s,l,i,t;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],s={x:900,y:58},l={},i={},t={1:"success","1-2":"success",2:"error","2-3":"error",3:"error",4:"success",5:"success",6:"success",7:"success",8:"success"},e[0]=f,e[1]=s,e[2]=l,e[3]=i,e[4]=t):(f=e[0],s=e[1],l=e[2],i=e[3],t=e[4]);let n;e[5]===Symbol.for("react.memo_cache_sentinel")?(n={open:!1,node:{}},e[5]=n):n=e[5];let u;e[6]!==o?(u={nodes:o,edges:f,offset:s,rootRect:l,nodeRect:i,status:t,dialog:n,lastUpdate:0},e[6]=o,e[7]=u):u=e[7];const[h,m]=O(u);let d;e[8]!==o||e[9]!==m||e[10]!==h?(d=()=>{const x={...h,rootRect:r.current.getBoundingClientRect(),edges:J(r,o),lastUpdate:Date.now()};m(x)},e[8]=o,e[9]=m,e[10]=h,e[11]=d):d=e[11],z("resize",d);let p;return e[12]!==m||e[13]!==h?(p={rootRef:r,state:h,setState:m},e[12]=m,e[13]=h,e[14]=p):p=e[14],p},X=["workflow-start","agent","deepseek","database","RSS"];D.includes=a=>X.includes(a);function D(a){const e=w.c(27);let o,r,f;e[0]!==a?({type:f,style:r,...o}=a,e[0]=a,e[1]=o,e[2]=r,e[3]=f):(o=e[1],r=e[2],f=e[3]);let s;e[4]!==r?(s={minWidth:30,fontSize:24,...r},e[4]=r,e[5]=s):s=e[5];const l=s;if(f==="RSS"){let t;e[6]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("path",{d:"M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"}),c.jsx("circle",{cx:"5",cy:"19",r:"1"})]}),e[6]=t):t=e[6];let n;return e[7]!==o||e[8]!==l?(n=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"rss",style:l,...o,children:t}),e[7]=o,e[8]=l,e[9]=n):n=e[9],n}if(f==="database"){let t;e[10]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),c.jsx("path",{d:"M3 5v14a9 3 0 0 0 18 0V5"}),c.jsx("path",{d:"M3 12a9 3 0 0 0 18 0"})]}),e[10]=t):t=e[10];let n;return e[11]!==o||e[12]!==l?(n=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"database",style:l,...o,children:t}),e[11]=o,e[12]=l,e[13]=n):n=e[13],n}if(f==="deepseek"){let t;e[14]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx("path",{d:"M23.748 4.482c-.254-.124-.364.113-.512.234-.051.039-.094.09-.137.136-.372.397-.806.657-1.373.626-.829-.046-1.537.214-2.163.848-.133-.782-.575-1.248-1.247-1.548-.352-.156-.708-.311-.955-.65-.172-.241-.219-.51-.305-.774-.055-.16-.11-.323-.293-.35-.2-.031-.278.136-.356.276-.313.572-.434 1.202-.422 1.84.027 1.436.633 2.58 1.838 3.393.137.093.172.187.129.323-.082.28-.18.552-.266.833-.055.179-.137.217-.329.14a5.526 5.526 0 01-1.736-1.18c-.857-.828-1.631-1.742-2.597-2.458a11.365 11.365 0 00-.689-.471c-.985-.957.13-1.743.388-1.836.27-.098.093-.432-.779-.428-.872.004-1.67.295-2.687.684a3.055 3.055 0 01-.465.137 9.597 9.597 0 00-2.883-.102c-1.885.21-3.39 1.102-4.497 2.623C.082 8.606-.231 10.684.152 12.85c.403 2.284 1.569 4.175 3.36 5.653 1.858 1.533 3.997 2.284 6.438 2.14 1.482-.085 3.133-.284 4.994-1.86.47.234.962.327 1.78.397.63.059 1.236-.03 1.705-.128.735-.156.684-.837.419-.961-2.155-1.004-1.682-.595-2.113-.926 1.096-1.296 2.746-2.642 3.392-7.003.05-.347.007-.565 0-.845-.004-.17.035-.237.23-.256a4.173 4.173 0 001.545-.475c1.396-.763 1.96-2.015 2.093-3.517.02-.23-.004-.467-.247-.588zM11.581 18c-2.089-1.642-3.102-2.183-3.52-2.16-.392.024-.321.471-.235.763.09.288.207.486.371.739.114.167.192.416-.113.603-.673.416-1.842-.14-1.897-.167-1.361-.802-2.5-1.86-3.301-3.307-.774-1.393-1.224-2.887-1.298-4.482-.02-.386.093-.522.477-.592a4.696 4.696 0 011.529-.039c2.132.312 3.946 1.265 5.468 2.774.868.86 1.525 1.887 2.202 2.891.72 1.066 1.494 2.082 2.48 2.914.348.292.625.514.891.677-.802.09-2.14.11-3.054-.614zm1-6.44a.306.306 0 01.415-.287.302.302 0 01.2.288.306.306 0 01-.31.307.303.303 0 01-.304-.308zm3.11 1.596c-.2.081-.399.151-.59.16a1.245 1.245 0 01-.798-.254c-.274-.23-.47-.358-.552-.758a1.73 1.73 0 01.016-.588c.07-.327-.008-.537-.239-.727-.187-.156-.426-.199-.688-.199a.559.559 0 01-.254-.078c-.11-.054-.2-.19-.114-.358.028-.054.16-.186.192-.21.356-.202.767-.136 1.146.016.352.144.618.408 1.001.782.391.451.462.576.685.914.176.265.336.537.445.848.067.195-.019.354-.25.452z",fill:"#4D6BFE"}),e[14]=t):t=e[14];let n;return e[15]!==o||e[16]!==l?(n=c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:l,...o,children:t}),e[15]=o,e[16]=l,e[17]=n):n=e[17],n}if(f==="agent"){let t;e[18]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("path",{d:"M12 8V4H8"}),c.jsx("rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}),c.jsx("path",{d:"M2 14h2m16 0h2m-7-1v2m-6-2v2"})]}),e[18]=t):t=e[18];let n;return e[19]!==o||e[20]!==l?(n=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"robot",style:l,...o,children:t}),e[19]=o,e[20]=l,e[21]=n):n=e[21],n}if(f==="workflow-start"){let t;e[22]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx("path",{fill:"none",style:{color:"#f76b56"},stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m16 17l5-5l-5-5m5 5H9m0 9H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e[22]=t):t=e[22];let n;return e[23]!==o||e[24]!==l?(n=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"sign-out-alt",style:l,...o,children:t}),e[23]=o,e[24]=l,e[25]=n):n=e[25],n}let i;return e[26]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx(c.Fragment,{}),e[26]=i):i=e[26],i}const Y=a=>{const e=w.c(28),{id:o,type:r}=a;let f;e[0]!==o?(f={className:"d-node-handle","data-id":o},e[0]=o,e[1]=f):f=e[1];const s=f;if(["deepseek","database","RSS"].includes(r)){let i;return e[2]!==s?(i=c.jsx("div",{...s,"data-location":"top","data-shape":"rotate-square"}),e[2]=s,e[3]=i):i=e[3],i}if(r==="workflow-start"){let i;return e[4]!==s?(i=c.jsx("div",{...s,"data-location":"right"}),e[4]=s,e[5]=i):i=e[5],i}if(r==="agent"){let i,t;e[6]!==s?(i=c.jsx("div",{...s,"data-location":"right"}),t=c.jsx("div",{...s,"data-location":"bottom","data-type":"chat-model","data-shape":"rotate-square"}),e[6]=s,e[7]=i,e[8]=t):(i=e[7],t=e[8]);let n;e[9]===Symbol.for("react.memo_cache_sentinel")?(n=c.jsx("span",{className:"label-required",children:"*"}),e[9]=n):n=e[9];let u,h,m,d,g,p;e[10]!==s?(h=c.jsxs("div",{...s,"data-location":"bottom","data-type":"chat-model-label","data-flag":"label",children:["Chat Model",n]}),m=c.jsx("div",{...s,"data-location":"bottom","data-type":"memory","data-shape":"rotate-square"}),d=c.jsx("div",{...s,"data-location":"bottom","data-type":"memory-label","data-flag":"label",children:"Memory"}),g=c.jsx("div",{...s,"data-location":"bottom","data-type":"tool","data-shape":"rotate-square"}),p=c.jsx("div",{...s,"data-location":"bottom","data-type":"tool-label","data-flag":"label",children:"Tool"}),u=c.jsx("div",{...s,"data-location":"left","data-shape":"square"}),e[10]=s,e[11]=u,e[12]=h,e[13]=m,e[14]=d,e[15]=g,e[16]=p):(u=e[11],h=e[12],m=e[13],d=e[14],g=e[15],p=e[16]);let x;return e[17]!==u||e[18]!==i||e[19]!==t||e[20]!==h||e[21]!==m||e[22]!==d||e[23]!==g||e[24]!==p?(x=c.jsxs(T.Fragment,{children:[i,t,h,m,d,g,p,u]}),e[17]=u,e[18]=i,e[19]=t,e[20]=h,e[21]=m,e[22]=d,e[23]=g,e[24]=p,e[25]=x):x=e[25],x}let l;return e[26]!==s?(l=c.jsxs(T.Fragment,{children:[c.jsx("div",{...s,"data-location":"top"}),c.jsx("div",{...s,"data-location":"right"}),c.jsx("div",{...s,"data-location":"bottom"}),c.jsx("div",{...s,"data-location":"left"})]}),e[26]=s,e[27]=l):l=e[27],l},Z=a=>{const e=w.c(25);let o,r,f,s;e[0]!==a?({state:f,item:o,style:s,...r}=a,e[0]=a,e[1]=o,e[2]=r,e[3]=f,e[4]=s):(o=e[1],r=e[2],f=e[3],s=e[4]);const{id:l,type:i,label:t,nextLabel:n,x:u,y:h,row:m}=o,d=i===void 0?"default":i,g=t===void 0?"":t,p=n===void 0?"":n,x=u===void 0?0:u,y=h===void 0?0:h,b=A(m)?m*I:y*E,j=x*E+10,v=b+30,S=f?.status?.[l]??"default",C=`translate(${j}px, ${v}px)`;let $;e[5]!==s||e[6]!==C?($={transform:C,...s},e[5]=s,e[6]=C,e[7]=$):$=e[7];let _;e[8]!==d?(_=D.includes(d)&&c.jsx(D,{type:d}),e[8]=d,e[9]=_):_=e[9];let k;e[10]!==g||e[11]!==p?(k=g&&c.jsxs(L,{className:"d-node-label-container",children:[c.jsx(L,{className:"label",children:g}),c.jsx(L,{className:"next-label",none:!p,children:p})]}),e[10]=g,e[11]=p,e[12]=k):k=e[12];let R;e[13]!==l||e[14]!==d?(R=c.jsx(Y,{id:l,type:d}),e[13]=l,e[14]=d,e[15]=R):R=e[15];let N;return e[16]!==l||e[17]!==r||e[18]!==R||e[19]!==S||e[20]!==$||e[21]!==_||e[22]!==k||e[23]!==d?(N=c.jsxs("div",{className:"d-node","data-id":l,"data-type":d,"data-status":S,style:$,...r,children:[_,k,R]}),e[16]=l,e[17]=r,e[18]=R,e[19]=S,e[20]=$,e[21]=_,e[22]=k,e[23]=d,e[24]=N):N=e[24],N},K=a=>{const e=w.c(9),{state:o}=a;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[["arrowhead","#c2c8d5"],["arrowhead-hover","red"],["arrowhead-success","#3da463"],["arrowhead-error","#ea6872"],["arrowhead-warning","#fab355"]],e[0]=r):r=e[0];const f=r;let s;e[1]!==o?(s=u=>{const{id:h,start:m,end:d}=u;if(o?.status?.[h])return o.status[h];const g=o?.status?.[m]??"default",p=o?.status?.[d]??"default";return[g,p].includes("default")?"default":[g,p].includes("error")?"error":"default"},e[1]=o,e[2]=s):s=e[2];const l=s;let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=c.jsx("defs",{children:f.map(Q)}),e[3]=i):i=e[3];let t;e[4]!==l||e[5]!==o?.edges?(t=o?.edges.map(u=>{const{id:h,d:m,className:d}=u;return c.jsx("path",{className:F("d-edge",d),"data-status":l(u),d:m,fill:"none"},h)}),e[4]=l,e[5]=o?.edges,e[6]=t):t=e[6];let n;return e[7]!==t?(n=c.jsxs("svg",{className:"chart__diagram-edge-container",children:[i,t]}),e[7]=t,e[8]=n):n=e[8],n};function Q(a){const[e,o]=a;return c.jsx("marker",{id:e,markerWidth:"3.5",markerHeight:"2.5",refX:"1",refY:"1.25",orient:"auto",children:c.jsx("path",{d:"M0,0 L2.5,1.25 L0,2.5 Z",fill:o})},e)}function ee(a){const e=w.c(16),{state:o,setState:r}=a;let f;e[0]!==o.dialog?(f=o.dialog||{},e[0]=o.dialog,e[1]=f):f=e[1];const{open:s,node:l}=f;let i;e[2]!==l?(i=l===void 0?{}:l,e[2]=l,e[3]=i):i=e[3];const t=i;let n;if(e[4]!==t||e[5]!==s||e[6]!==r){let u;e[8]!==r?(u=()=>{r({dialog:{open:!1,node:{}}})},e[8]=r,e[9]=u):u=e[9];let h;e[10]!==t?(h=JSON.stringify(t),e[10]=t,e[11]=h):h=e[11];let m;e[12]!==s||e[13]!==u||e[14]!==h?(m=c.jsx(q,{className:"diagram-dialog",open:s,onCancel:u,children:h}),e[12]=s,e[13]=u,e[14]=h,e[15]=m):m=e[15],n=B.createPortal(m,document.body),e[4]=t,e[5]=s,e[6]=r,e[7]=n}else n=e[7];return n}function le(){const a=w.c(19);let e;a[0]===Symbol.for("react.memo_cache_sentinel")?(e={nodes:V},a[0]=e):e=a[0];const{rootRef:o,state:r,setState:f}=U(e);let s;a[1]!==r?(s=c.jsx(K,{state:r}),a[1]=r,a[2]=s):s=a[2];let l;a[3]!==f||a[4]!==r?(l=r.nodes.map((h,m)=>c.jsx(Z,{item:h,state:r,onClick:()=>{console.log(h),f({dialog:{open:!0,node:h}})}},m)),a[3]=f,a[4]=r,a[5]=l):l=a[5];let i;a[6]!==l?(i=c.jsx("div",{className:"chart__diagram-node-container",children:l}),a[6]=l,a[7]=i):i=a[7];let t;a[8]!==r.dialog?(t=JSON.stringify(r.dialog),a[8]=r.dialog,a[9]=t):t=a[9];let n;a[10]!==f||a[11]!==r||a[12]!==t?(n=c.jsx(ee,{state:r,setState:f},t),a[10]=f,a[11]=r,a[12]=t,a[13]=n):n=a[13];let u;return a[14]!==o||a[15]!==s||a[16]!==i||a[17]!==n?(u=c.jsxs("div",{className:"chart__diagram",ref:o,children:[s,i,n]}),a[14]=o,a[15]=s,a[16]=i,a[17]=n,a[18]=u):u=a[18],u}export{le as default};
