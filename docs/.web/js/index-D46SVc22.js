import{j as a}from"./index-LWT-uAME.js";import{u as D}from"./use-load-9CB_qLTA.js";import"./index.esm-Bg5LkWwD.js";const y=()=>{D("/js/gsap/3.12.5/gsap.min.js",()=>{class g{DOM={el:null,innerElems:null,debugPanel:null,cursorDrag:null};bgImage;currentShape="rectangle";currentEffect="stroke";duration=.8;ease="power2.inOut";scaleInterval=.06;rotationInterval=15;parallaxStrength=20;innerTotal=10;shapeSize=45;transformOrigin="50% 50%";mouseX=0;mouseY=0;centerX=0;centerY=0;isHovered=!1;isDragging=!1;dragStartY=0;dragDistance=0;smoothDragDistance=0;isRotationActive=!1;currentRotation=0;currentScale=1;layerOutlines=[];layerShadows=[];dragLerpFactor=.1;animationFrame=null;hoverTimeline=null;isTransitioning=!1;constructor(t){this.DOM={el:t,debugPanel:document.getElementById("debugPanel"),cursorDrag:document.getElementById("cursorDrag")},this.bgImage=/(?:\(['"]?)(.*?)(?:['"]?\))/.exec(this.DOM.el.style.backgroundImage)[1],gsap.set(this.DOM.el,{backgroundImage:"none"}),this.createLayers(),gsap.set(this.DOM.el,{transformOrigin:this.transformOrigin}),this.createLayerOutlines(),this.createHoverTimeline(),this.initEvents(),this.initShapeControls(),this.initEffectControls(),this.startAnimationLoop()}createLayers(){let t="";for(let e=0;e<this.innerTotal;e++){const s=e===0?"rectangle":this.currentShape;t+=`<div class="image__element ${s} ${e===0?"base-layer":""}" style="background-image:url(${this.bgImage})" data-layer="${e}"></div>`}this.DOM.el.innerHTML=t,this.DOM.innerElems=this.DOM.el.querySelectorAll(".image__element"),this.updateCenter()}updateCenter(){const t=this.DOM.el.getBoundingClientRect();this.centerX=t.left+t.width/2,this.centerY=t.top+t.height/2}createLayerOutlines(){this.layerOutlines.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.layerOutlines=[],this.layerShadows.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.layerShadows=[],this.DOM.innerElems.forEach((t,e)=>{if(e===0)return;const s=t.querySelector(".layer-outline"),i=t.querySelector(".layer-shadow");s&&s.remove(),i&&i.remove();const r=document.createElement("div");r.className="layer-outline",r.setAttribute("data-layer",e);const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 100 100"),o.setAttribute("preserveAspectRatio","none");const n=document.createElementNS("http://www.w3.org/2000/svg","path"),d=this.getLayerShapePath(e);n.setAttribute("d",d),n.setAttribute("stroke","#ffffff"),n.setAttribute("stroke-width","1"),n.setAttribute("fill","none"),n.setAttribute("vector-effect","non-scaling-stroke"),n.style.filter="drop-shadow(0 0 2px rgba(255, 255, 255, 0.5))",o.appendChild(n),r.appendChild(o);const c=document.createElement("div");c.className="layer-shadow",c.setAttribute("data-layer",e);const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("viewBox","0 0 100 100"),h.setAttribute("preserveAspectRatio","none");for(let u=0;u<3;u++){const l=document.createElementNS("http://www.w3.org/2000/svg","path"),m=this.getLayerShapePath(e);l.setAttribute("d",m);const p=.4-u*.08,v=3-u*.8;l.setAttribute("fill","none"),l.setAttribute("stroke",`rgba(0, 0, 0, ${p})`),l.setAttribute("stroke-width",v),l.setAttribute("vector-effect","non-scaling-stroke"),h.appendChild(l)}c.appendChild(h),t.appendChild(r),t.appendChild(c),this.layerOutlines.push(r),this.layerShadows.push(c)})}getLayerShapePath(t){switch(this.currentShape){case"rectangle":return"M 0 0 L 100 0 L 100 100 L 0 100 Z";case"triangle":return"M 50 5 L 10 95 L 90 95 Z";case"chevron":return"M 75 0 L 100 50 L 75 100 L 0 100 L 25 50 L 0 0 Z";case"oval":return"M 50 15 C 74.85 15 95 31.32 95 50 C 95 68.68 74.85 85 50 85 C 25.15 85 5 68.68 5 50 C 5 31.32 25.15 15 50 15 Z";default:return""}}startAnimationLoop(){const t=()=>{this.smoothDragDistance+=(this.dragDistance-this.smoothDragDistance)*this.dragLerpFactor,this.isHovered&&!this.isTransitioning&&(this.isRotationActive?(this.updateDragRotation(),this.updateLayerOutlines()):this.isDragging||(this.updateParallax(),this.updateLayerOutlines())),this.updateDebugInfo(),this.animationFrame=requestAnimationFrame(t)};t()}updateParallax(){const t=(this.mouseX-this.centerX)/(this.DOM.el.offsetWidth/2),e=(this.mouseY-this.centerY)/(this.DOM.el.offsetHeight/2);this.DOM.innerElems.forEach((s,i)=>{if(i===0)return;const r=i*.2,o=t*this.parallaxStrength*r*.5,n=e*this.parallaxStrength*r*.5;gsap.set(s,{x:o,y:n,z:i*10,transformPerspective:1e3})})}updateDragRotation(){const t=Math.min(Math.abs(this.smoothDragDistance)/100,1);this.DOM.innerElems.forEach((e,s)=>{if(s===0)return;const r=this.smoothDragDistance/2*t*(s*.3),o=(this.mouseX-this.centerX)/(this.DOM.el.offsetWidth/2),n=(this.mouseY-this.centerY)/(this.DOM.el.offsetHeight/2),d=s*.3,c=o*this.parallaxStrength*d,h=n*this.parallaxStrength*d;gsap.set(e,{x:c,y:h,z:s*15,rotationX:n*15*t,rotationY:o*-15*t,rotationZ:r,transformPerspective:1e3,transformStyle:"preserve-3d"})}),this.currentRotation=this.smoothDragDistance/2,this.currentScale=1+Math.abs(t)*2}updateLayerOutlines(){this.updateEffectVisibility()}updateDebugInfo(){if(!this.DOM.debugPanel)return;const t=this.DOM.debugPanel.querySelector("#rotationInfo"),e=this.DOM.debugPanel.querySelector("#scaleInfo"),s=this.DOM.debugPanel.querySelector("#edgesInfo");if(t&&(t.textContent=`rotation: ${this.currentRotation.toFixed(1)}`),e&&(e.textContent=`scale: ${this.currentScale.toFixed(1)}`),s){const i=this.getShapeEdgeCount();s.textContent=`edges: ${i.toFixed(1)}`}}getShapeEdgeCount(){switch(this.currentShape){case"rectangle":return 4;case"triangle":return 3;case"chevron":return 6;case"oval":return 0;default:return 0}}applyCurrentShape(){this.DOM.innerElems.forEach((t,e)=>{e!==0&&(t.classList.remove("rectangle","triangle","chevron","oval"),t.classList.add(this.currentShape))}),this.createLayerOutlines()}initShapeControls(){const t=document.querySelectorAll(".shape-btn");t.forEach(e=>{e.addEventListener("click",()=>{const s=e.dataset.shape;s!==this.currentShape&&!this.isTransitioning&&(this.changeShape(s),t.forEach(i=>i.classList.remove("active")),e.classList.add("active"))})})}initEffectControls(){const t=document.querySelectorAll(".effect-btn");t.forEach(e=>{e.addEventListener("click",()=>{const s=e.dataset.effect;s!==this.currentEffect&&!this.isTransitioning&&(this.changeEffect(s),t.forEach(i=>i.classList.remove("active")),e.classList.add("active"))})})}changeEffect(t){this.currentEffect=t,this.updateEffectVisibility()}updateEffectVisibility(){this.layerOutlines.forEach(t=>{this.currentEffect==="stroke"&&this.isRotationActive?t.classList.add("active"):t.classList.remove("active")}),this.layerShadows.forEach(t=>{this.currentEffect==="shade"&&this.isRotationActive?t.classList.add("active"):t.classList.remove("active")})}changeShape(t){if(this.isTransitioning)return;this.isTransitioning=!0,new Promise(s=>{this.hoverTimeline&&this.hoverTimeline.pause(),gsap.to(this.DOM.innerElems,{scale:1,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,duration:.4,ease:"power2.out",onComplete:s}),this.isRotationActive=!1,this.DOM.el.classList.remove("rotation-active"),this.dragDistance=0,this.smoothDragDistance=0,this.currentRotation=0,this.currentScale=1,this.layerOutlines.forEach(i=>{i.classList.remove("active")}),this.layerShadows.forEach(i=>{i.classList.remove("active")})}).then(()=>{this.currentShape=t,this.applyCurrentShape(),this.createHoverTimeline(),this.isHovered&&this.hoverTimeline.play(),this.isTransitioning=!1})}createHoverTimeline(){const t=s=>{let i=1-this.scaleInterval*s;return i>=0?i:0};this.hoverTimeline&&this.hoverTimeline.kill();const e=Array.from(this.DOM.innerElems).reverse();this.hoverTimeline=gsap.timeline({paused:!0}).to(e,{scale:(s,i)=>{const r=Array.from(this.DOM.innerElems).indexOf(i);return t(r)},duration:this.duration,ease:this.ease,stagger:.1})}initEvents(){this.DOM.el.addEventListener("mouseenter",()=>{this.isTransitioning||(this.isHovered=!0,this.updateCenter(),this.hoverTimeline.play(),this.DOM.cursorDrag&&(this.DOM.cursorDrag.style.opacity="1"))}),this.DOM.el.addEventListener("mouseleave",()=>{this.isHovered=!1,this.isTransitioning||this.hoverTimeline.reverse(),this.resetTransforms(),this.DOM.cursorDrag&&(this.DOM.cursorDrag.style.opacity="0")}),this.DOM.el.addEventListener("mousemove",t=>{this.mouseX=t.clientX,this.mouseY=t.clientY,this.DOM.cursorDrag&&(this.DOM.cursorDrag.style.left=t.clientX+"px",this.DOM.cursorDrag.style.top=t.clientY+"px")}),document.addEventListener("mousemove",t=>{this.DOM.cursorDrag&&this.isHovered&&(this.DOM.cursorDrag.style.left=t.clientX+"px",this.DOM.cursorDrag.style.top=t.clientY+"px")}),this.DOM.el.addEventListener("mousedown",t=>{this.isTransitioning||(this.isDragging=!0,this.dragStartY=t.clientY,this.DOM.el.classList.add("dragging"),this.DOM.cursorDrag&&this.DOM.cursorDrag.classList.add("hide-up"),t.preventDefault())}),document.addEventListener("mousemove",t=>{this.isDragging&&!this.isTransitioning&&(this.dragDistance=t.clientY-this.dragStartY,Math.abs(this.dragDistance)>30&&!this.isRotationActive&&(this.isRotationActive=!0,this.DOM.el.classList.add("rotation-active")))}),document.addEventListener("mouseup",()=>{this.isDragging&&(this.isDragging=!1,this.DOM.el.classList.remove("dragging"),this.DOM.cursorDrag&&this.isHovered&&this.DOM.cursorDrag.classList.remove("hide-up"),gsap.to(this,{dragDistance:0,duration:.5,ease:"power2.out"}))}),window.addEventListener("resize",()=>{this.updateCenter(),this.createLayerOutlines()}),this.DOM.el.addEventListener("touchstart",t=>{this.isTransitioning||(this.isDragging=!0,this.dragStartY=t.touches[0].clientY,this.DOM.el.classList.add("dragging"),t.preventDefault())}),document.addEventListener("touchmove",t=>{this.isDragging&&!this.isTransitioning&&(this.dragDistance=t.touches[0].clientY-this.dragStartY,Math.abs(this.dragDistance)>30&&!this.isRotationActive&&(this.isRotationActive=!0,this.DOM.el.classList.add("rotation-active")))}),document.addEventListener("touchend",()=>{this.isDragging&&(this.isDragging=!1,this.DOM.el.classList.remove("dragging"),gsap.to(this,{dragDistance:0,duration:.5,ease:"power2.out"}))})}resetTransforms(){this.DOM.innerElems.forEach((t,e)=>{e!==0&&gsap.to(t,{x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,duration:.6,ease:"power2.out"})}),gsap.to(this,{smoothDragDistance:0,duration:.6,ease:"power2.out"}),this.isRotationActive=!1,this.DOM.el.classList.remove("rotation-active"),this.currentRotation=0,this.currentScale=1,this.layerOutlines.forEach(t=>{t.classList.remove("active")}),this.layerShadows.forEach(t=>{t.classList.remove("active")})}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.hoverTimeline&&this.hoverTimeline.kill(),this.layerOutlines.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.layerShadows.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)})}}const f=document.querySelector(".image");new g(f)})};function b(){return y(),a.jsxs("div",{className:"animation__repetition-image",children:[a.jsx("div",{className:"main-container",children:a.jsx("div",{className:"image",style:{backgroundImage:"url('https://cdn.prod.website-files.com/65e61ac90950149fdb15e419/685027578326569ff9bb118d_2025-06-16%2017.16.41.jpg')"}})}),a.jsxs("div",{className:"controls",children:[a.jsxs("div",{className:"shape-controls",children:[a.jsx("button",{className:"shape-btn active","data-shape":"rectangle",children:"1"}),a.jsx("button",{className:"shape-btn","data-shape":"triangle",children:"2"}),a.jsx("button",{className:"shape-btn","data-shape":"chevron",children:"3"}),a.jsx("button",{className:"shape-btn","data-shape":"oval",children:"4"})]}),a.jsxs("div",{className:"effect-controls",children:[a.jsx("button",{className:"effect-btn active","data-effect":"stroke",children:"STROKE"}),a.jsx("span",{children:"OR"}),a.jsx("button",{className:"effect-btn","data-effect":"shade",children:"SHADE"})]})]}),a.jsx("div",{className:"cursor-drag",id:"cursorDrag",children:a.jsx("span",{className:"drag-text",children:"DRAG"})}),a.jsx("div",{className:"debug-panel",id:"debugPanel",children:a.jsxs("div",{className:"debug-info",children:[a.jsx("span",{id:"rotationInfo",children:"rotation: 0.0"}),a.jsx("span",{id:"scaleInfo",children:"scale: 1.0"}),a.jsx("span",{id:"edgesInfo",children:"edges: 0.0"})]})})]})}export{b as default};
