"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[703],{703:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(5296);const l=250;const i=e=>10*Math.floor(e/10);var u=n(7113),o=Object.defineProperty,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&d(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&d(e,n,t[n]);return e},p=(e,t)=>{var n={};for(var r in e)c.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&a)for(var r of a(e))t.indexOf(r)<0&&s.call(e,r)&&(n[r]=e[r]);return n};function y(e){const t=e,{id:n,none:l,onDragStart:i,onDragging:o,onDragEnd:a,children:c}=t,s=p(t,["id","none","onDragStart","onDragging","onDragEnd","children"]),d=r.useRef(null),y=r.useRef({id:n,drag:!1,leaveLeft:!1,dragCount:0,offsetX:0,offsetY:0,lastX:-1,lastY:-1}),g=function(e,t){let n=null;return function(){n||(n=setTimeout(()=>{e.apply(this,arguments),n=null},t))}}(t=>{var n,r;if(null==(n=null==t?void 0:t.preventDefault)||n.call(t),null==(r=null==t?void 0:t.stopPropagation)||r.call(t),!d.current||!y.current.drag)return;const l=window.document.body.getBoundingClientRect(),i=d.current.getBoundingClientRect(),u=(e,t="x")=>{if(e<0)return 0;if("x"===t){const t=l.width-i.width;if(e>=t)return t}if("y"===t){const t=l.height-i.height;if(e>=t)return t}return e},a=u(t.clientX-y.current.offsetX,"x"),c=u(t.clientY-y.current.offsetY,"y");d.current.style.left=a+"px",d.current.style.top=c+"px",null==o||o(d,y.current,e)},10);function v(){d.current&&(y.current.offsetX=0,y.current.offsetY=0,y.current.drag=!1,y.current.dragCount=y.current.dragCount+1,d.current.style.opacity="none",d.current.style.zIndex="1",d.current.style.opacity="1",d.current.style.border="none",document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v),null==a||a(d,y.current,e))}return r.createElement("div",f({className:(0,u.xW)("ele",{none:l}),ref:d,onMouseDown:function(t){var n,r;if(null==(n=null==t?void 0:t.preventDefault)||n.call(t),null==(r=null==t?void 0:t.stopPropagation)||r.call(t),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v),!d.current)return;const l=d.current.getBoundingClientRect();y.current.lastX=Number(d.current.style.left.replace("px",""))||0,y.current.lastY=Number(d.current.style.top.replace("px",""))||0,y.current.offsetX=t.clientX-l.left,y.current.offsetY=t.clientY-l.top,y.current.drag=!0,d.current.style.opacity=".8",d.current.style.zIndex="10000",d.current.style.border="1px solid rgba(255,255,255, 9)",document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),null==i||i(d,y.current,e)}},s),c)}var g=n(6045);const v=()=>{const[e,t]=(0,g.xI)({selectId:"",list:[{id:"1",type:"sider"}]}),n=t=>{var n;return null==(n=e.list)?void 0:n.find(e=>e.id===t)},r=()=>{var t;return(((null==(t=e.list)?void 0:t.length)||0)+1).toString()};return{state:e,setState:t,updateState:(e,t)=>{},find:n,inSider:e=>{var t;return"sider"===(null==(t=n(e))?void 0:t.type)},inContent:e=>{var t;return"content"===(null==(t=n(e))?void 0:t.type)},getId:r,to:(t,n)=>{e.list&&(e.list=e.list.map(e=>(e.id===t&&(e.type=n),e)))},create:()=>{const t={id:r(),type:"sider"};e.list?e.list.push(t):e.list=[t]},del:t=>{e.list&&(e.list=e.list.map(e=>(e.id===t&&(e.type="del"),e)))}}};function m(){var e;const t=v(),{state:n,setState:u}=t,o=(e,t)=>{u({selectId:t.id})},a=(e,t)=>{if(!e.current)return;const n=e.current.getBoundingClientRect(),r=document.querySelector(".auxiliary-line.auxiliary-line-x"),u=document.querySelector(".auxiliary-line.auxiliary-line-y");r&&(r.style.top=i(n.top)+"px"),u&&(u.style.left=(n.left>l?i(n.left):l)+"px")},c=(e,r)=>{if(!e.current)return;const o=e.current.getBoundingClientRect(),{id:a}=r;n.list||(n.list=[]),o.left<l?(e.current.style.left="10px",e.current.style.top="10px",t.inContent(a)&&t.del(a)):(e.current.style.left=i(o.left)+"px",e.current.style.top=i(o.top)+"px",t.inSider(a)&&(t.create(),t.to(a,"content"))),u(n)};return r.createElement("div",{className:"study-drag"},r.createElement("div",{className:"sider"},null==(e=n.list)?void 0:e.map(({id:e,type:t})=>r.createElement(y,{key:e,id:e,onDragStart:o,onDragging:a,onDragEnd:c,none:"del"===t},e))),r.createElement("div",{className:"content"}),r.createElement("div",{className:"auxiliary-line auxiliary-line-x"}),r.createElement("div",{className:"auxiliary-line auxiliary-line-y"}))}}}]);