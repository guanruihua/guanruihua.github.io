"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[5087],{6045:(e,t,o)=>{o.d(t,{xI:()=>d});var n=o(5296);function i(e){return null==e||e!=e}function s(e){try{if("object"==typeof(t=e)&&!i(t)&&/Iterator\]$/.test(t.toString()))return"Iterator";const o=Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1];return"Number"===o&&isNaN(e)?"NaN":o}catch(e){return"Undefined"}var t}function r(e){return"string"==typeof e}const c=e=>"number"==typeof e&&"Number"===s(e);function l(e){return!i(e)&&(function(e){return Array.isArray(e)}(e)&&e.length>0)}const a="undefined"!=typeof window;function d(e={},t,o=localStorage){const[i,s]=(0,n.useState)(e),a=e=>{if(s(e),t)try{o.setItem(t,JSON.stringify(e))}catch(e){return void console.warn(e)}};return(0,n.useEffect)(()=>{if(t)try{const e=o.getItem(t);if(!e||"{}"===e)return;a(JSON.parse(e))}catch(e){return}},[t,o]),[i,(e,t=!1)=>{const o="function"==typeof e?e(i):e;a(t?o:{...i,...o})},t=>{if(l(t)){const o={...i};return t.forEach(t=>{(r(t)||c(t))&&(o[t]=e[t])}),void a(o)}a(e)}]}a&&window?.navigator?.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent)},6833:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var n=o(5296),i=o(6045);const s=o.p+".web/img/ball_32_32.png",r=o.p+".web/img/paddle_128_32.png",c=o.p+".web/img/brick1_64_32.png",l=o.p+".web/img/brick2_64_32.png",a=o.p+".web/img/brick3_64_32.png";function d(){this.load.image("ball",s),this.load.image("paddle",r),this.load.image("brick1",c),this.load.image("brick2",l),this.load.image("brick3",a)}function u(e,t){t.disableBody(!0,!0);let o=0;0==e.body.velocity.x&&(o=Math.random(),o>=.5?e.setVelocityX(150):e.setVelocityX(-150))}function p(e,t){e.setVelocityY(e.body.velocity.y-5);let o=Math.abs(e.body.velocity.x)+5;e.x<t.x?e.setVelocityX(-o):e.setVelocityX(o)}const y=(e,t)=>{let o=null,n=null,i=[],s=null,r=!1,c={opening:null,gameOver:null,playerWon:null};const l={type:e.AUTO,parent:t,width:800,height:640,scale:{},scene:{preload:d,create:function(){var e;const t=this;o=t.physics.add.sprite(400,600,"paddle"),n=t.physics.add.sprite(400,565,"ball"),i=(e=>[e.physics.add.group({key:"brick1",repeat:9,immovable:!0,setXY:{x:80,y:40,stepX:70}}),e.physics.add.group({key:"brick2",repeat:9,immovable:!0,setXY:{x:80,y:90,stepX:70}}),e.physics.add.group({key:"brick3",repeat:9,immovable:!0,setXY:{x:80,y:140,stepX:70}}),e.physics.add.group({key:"brick1",repeat:9,immovable:!0,setXY:{x:80,y:190,stepX:70}})])(t),s=null==(e=t.input.keyboard)?void 0:e.createCursorKeys(),null==o||o.setCollideWorldBounds(!0),null==n||n.setCollideWorldBounds(!0),null==n||n.setBounce(1,1),t.physics.world.checkCollision.down=!1,i.forEach(e=>{n&&e&&t.physics.add.collider(n,e,u,void 0,t)}),o.setImmovable(!0),t.physics.add.collider(n,o,p,void 0,t),c=(e=>{const t=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"Press SPACE to Start",{fontFamily:"Monaco, Courier, monospace",fontSize:"50px"});t.setOrigin(.5);const o=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"Game Over",{fontFamily:"Monaco, Courier, monospace",fontSize:"50px",color:"#F60000"});o.setOrigin(.5),o.setVisible(!1);const n=e.add.text(e.physics.world.bounds.width/2,e.physics.world.bounds.height/2,"You won!",{fontFamily:"Monaco, Courier, monospace",fontSize:"50px"});return n.setOrigin(.5),n.setVisible(!1),{opening:t,gameOver:o,playerWon:n}})(t)},update:function(){var e,t,l;(null==o?void 0:o.body)&&n&&s&&(!function(e,t){return!(!(null==e?void 0:e.body)||!(null==t?void 0:t.bounds))&&e.body.y>t.bounds.height}(n,this.physics.world)?!function(e){let t=-1;return e.forEach(e=>{e&&(-1!==t?t+=e.countActive():t=e.countActive())}),0===t}(i)?(o.setVelocityX(0),s.left.isDown?o.setVelocityX(-350):s.right.isDown&&o.setVelocityX(350),r||(n.setX(o.x),s.space.isDown&&(r=!0,n.setVelocityY(-200),null==(l=c.opening)||l.setVisible(!1)))):(null==(t=c.playerWon)||t.setVisible(!0),n.disableBody(!0,!0)):(null==(e=c.gameOver)||e.setVisible(!0),n.disableBody(!0,!0)))}},physics:{default:"arcade"}},a=new e.Game(l);console.log(a)},h=()=>{const e=n.useRef(null),{Phaser:t}=(()=>{const[e,t]=n.useState(null);return n.useEffect(()=>{const e="/js/phaser.min.js",o=document.createElement("script");return o.src=e,o.onload=()=>{console.log("Phaser",e,"已加载");const o=window.Phaser;t(o)},document.body.appendChild(o),()=>{document.body.removeChild(o)}},[]),{Phaser:e}})(),[o,s]=(0,i.xI)({});return n.useEffect(()=>{t&&e.current&&y(t,e.current)},[t,e.current]),{containerRef:e,state:o,setState:s}};function b(){const e=h(),{state:t,setState:o}=e;return n.createElement("div",{className:"game__brick"},n.createElement("div",{ref:e.containerRef}))}}}]);