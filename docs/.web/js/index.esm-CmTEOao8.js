import{r as a,R as c}from"./index-BFOesgsR.js";function S(t){return t==null||t!==t}function m(t){return typeof t!="object"||S(t)?!1:/Iterator\]$/.test(t.toString())}function E(t){try{if(m(t))return"Iterator";const e=Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1];return e==="Number"&&isNaN(t)?"NaN":e}catch{return"Undefined"}}function y(t){return typeof t=="string"}const N=t=>typeof t=="number"&&E(t)==="Number";function d(t){return Array.isArray(t)}function w(t){return S(t)?!1:d(t)&&t.length>0}function g(t={},e,u=localStorage){const[f,i]=a.useState(t),o=r=>{if(i(r),!!e)try{u.setItem(e,JSON.stringify(r))}catch(n){console.warn(n);return}};return a.useEffect(()=>{if(e)try{const r=u.getItem(e);if(!r||r==="{}")return;o(JSON.parse(r))}catch{return}},[e,u]),[f,(r,n=!1)=>{const s=typeof r=="function"?r(f):r;o(n?s:{...f,...s})},r=>{if(w(r)){const n={...f};r.forEach(s=>{(y(s)||N(s))&&(n[s]=t[s])}),o(n);return}o(t)}]}function I(t,e,u,f){const i=c.useRef(u),[o,r]=c.useState(u),n=s=>{s?.preventDefault(),i.current=e(s),r(i.current)};return c.useEffect(()=>(window.removeEventListener(t,n),window.addEventListener(t,n,{passive:!0,...f}),n(),()=>{window.removeEventListener(t,n)}),[]),[o,r]}export{I as a,g as u};
