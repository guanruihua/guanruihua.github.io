"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[6615],{66615:(e,t,a)=>{a.r(t),a.d(t,{default:()=>F});var n=a(21742),o=a(96540);const r=()=>{const e=o.useRef(null);return{domRef:e,handleDownloadImage:()=>{return t=null,a=null,n=function*(){const t=window.html2canvas;console.log(t),t(e.current,{allowTaint:!0,useCORS:!0,backgroundColor:"#000"}).then(e=>{const t=e.toDataURL("image/png");(new Image).src=t;const a=document.createElement("a");a.download="filename.png",a.href=t,a.click()})},new Promise((e,o)=>{var r=e=>{try{c(n.next(e))}catch(e){o(e)}},l=e=>{try{c(n.throw(e))}catch(e){o(e)}},c=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,l);c((n=n.apply(t,a)).next())});var t,a,n},domToImage:()=>{console.log("domToImage")}}},l=()=>{const e="https://html2canvas.hertzen.com/dist/html2canvas.min.js";o.useEffect(()=>{const t=document.createElement("script");return t.src=e,t.onload=()=>{console.log(e,"已加载")},document.body.appendChild(t),()=>{document.body.removeChild(t)}},[])};var c=a(88361),i=a(3087),s=a(60351),m=a(58688),d=a(53019),u=a(64891),p=a(20076),h=a(58052),f=a(70778),g=a(32003),v=a(74064),y=a(6641),b=a(45620),E=a(76302),w=a(17763),x=a(60655),C=a(1830),k=a(22420),O=a(35278),I=a(30597),N=a(39539);i.Y([s.a,v.a,y.a,b.a,E.a,w.a,m.a,d.a,O._,I.i,N.a,x.a,u.a,p.a,h.a,f.a,C.a,k.a,g.a]);var R=a(89218),_=Object.defineProperty,D=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,j=(e,t,a)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,z=(e,t)=>{for(var a in t||(t={}))P.call(t,a)&&j(e,a,t[a]);if(D)for(var a of D(t))T.call(t,a)&&j(e,a,t[a]);return e},S=(e,t)=>{var a={};for(var n in e)P.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&D)for(var n of D(e))t.indexOf(n)<0&&T.call(e,n)&&(a[n]=e[n]);return a};function A(e){const t=e,{className:a,style:n,options:r,init:l,initCharFn:i}=t,s=S(t,["className","style","options","init","initCharFn"]);let m,d;return o.useEffect(()=>{try{m&&(d=c.getInstanceByDom(m),d||(d=c.init(m)),l?l(d):i&&i(d),d.setOption(r),window.addEventListener("resize",function(){d.resize()}))}catch(e){console.log(e)}},[r]),o.createElement("div",z({className:(0,R.xW)(a),style:n,ref:e=>m=e},s))}function F(){l();const e=r();return o.createElement("div",{className:"dev__dom-to-image"},o.createElement("div",null,"dom-to-image"),o.createElement(n.$n,{onClick:()=>e.domToImage()},"To"),o.createElement("div",{className:"container"},o.createElement("h1",null,"DOM转图片示例"),o.createElement("div",{className:"target-element",ref:e.domRef},o.createElement(A,{style:{height:400,background:"#fff",zoom:".5"},options:{xAxis:{type:"value"},yAxis:{type:"value"},series:[{symbolSize:10,data:[[10,8.04],[8.07,6.95],[13,7.58],[9.05,8.81],[11,8.33],[14,7.66],[13.4,6.81],[10,6.33],[14,8.96],[12.5,6.82],[9.15,7.2],[11.5,7.2],[3.03,4.23],[12.2,7.83],[2.02,4.47],[1.05,3.33],[4.05,4.96],[6.03,7.24],[12,6.26],[12,8.84],[7.08,5.82],[5.02,5.68]],type:"scatter"}]}}),o.createElement("h2",null,"这是一个纯DOM元素"),o.createElement("p",null,"这段内容将被转换为图片"),o.createElement("div",{style:{display:"flex",gap:"20px",margin:"15px 0"}},o.createElement("div",{style:{width:"50px",height:"50px",backgroundColor:"#ff6b6b",borderRadius:"50%"}}),o.createElement("div",{style:{width:"50px",height:"50px",backgroundColor:"#4ecdc4"}})),o.createElement("p",null,"使用纯JavaScript实现转换")),o.createElement("button",{onClick:e.handleDownloadImage,style:{padding:"8px 16px",backgroundColor:"#4a90e2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginTop:"20px"}},"下载PNG图片")))}}}]);