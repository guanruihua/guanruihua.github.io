"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[992],{7992:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var l=a(5296),n=a(5186);const r='{\n   "Access-Control-Allow-Origin": "*",\n   "Accept": "*/*",\n//  "Accept-Encoding": "gzip,deflate,br",\n//  "Connection": "keep-alive",\n//  "Content-type": "text/plain",\n   "Content-type": "application/json",\n}',s=[{id:"1",title:"标题1",method:"post",url:"http://localhost:2400/api/v1/server/ai",headerTxt:r,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}"},{id:"2",title:"标题2",method:"get",url:"http://localhost:2400/api/v1/server/ai",headerTxt:r,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}"}],o=()=>s;var c=a(4777),i=a(7113);const u=({className:e,value:t,cb:a})=>{const n=l.useRef(null),[r,s]=l.useState(t),[o,u]=l.useState("idle");return l.createElement("div",{ref:n,className:(0,i.xW)(["input-edit",e]),onDoubleClick:()=>{u("edit")}},l.createElement(c.i,{title:"input-edit-value",none:"edit"===o},t),"edit"===o&&l.createElement(c.pd,{value:r,onKeyDown:e=>{"Enter"===e.code&&(r&&a(r),u("idle"))},onChange:e=>{s(e.target.value)},onBlur:()=>{r&&a(r),u("idle")}}))};var d=a(2030),m=(e,t,a)=>new Promise((l,n)=>{var r=e=>{try{o(a.next(e))}catch(e){n(e)}},s=e=>{try{o(a.throw(e))}catch(e){n(e)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,s);o((a=a.apply(e,t)).next())});function h(e){const{value:t="{}",onChange:a}=e,n=l.useRef(null);return l.createElement(c.xA,{style:{gridTemplateColumns:"1fr auto"}},l.createElement(d.KE,{height:"600px",width:"100%",theme:"vs-dark",defaultLanguage:"json",options:{formatOnPaste:!0,formatOnType:!0,automaticLayout:!0,scrollBeyondLastLine:!1},defaultValue:t,onMount:function(e,t){n.current=e,t.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0,trailingCommas:"ignore",schemas:[],validate:!0})},onChange:a}),l.createElement(c.xA,null,l.createElement(c.$n,{onClick:()=>m(null,null,function*(){n.current&&(yield n.current.getAction("editor.action.formatDocument").run())}),style:{marginBottom:"10px"}},"Format")))}var p=a(1938),v=a(7599);function y(e="{}"){try{return(0,v.qg)(e)}catch(e){return{}}}const x=e=>{return t=null,a=null,l=function*(){console.log("send",e);const{bodyTxt:t,headerTxt:a,method:l="post",paramsTxt:n,url:r}=e,s=y(a),o=y(n),c=y(t);try{const e=yield(0,p.A)({method:l,url:r,params:o,data:c,headers:s});return console.log(e),e}catch(e){console.error(e)}},new Promise((e,n)=>{var r=e=>{try{o(l.next(e))}catch(e){n(e)}},s=e=>{try{o(l.throw(e))}catch(e){n(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,s);o((l=l.apply(t,a)).next())});var t,a,l};var g=(e,t,a)=>new Promise((l,n)=>{var r=e=>{try{o(a.next(e))}catch(e){n(e)}},s=e=>{try{o(a.throw(e))}catch(e){n(e)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,s);o((a=a.apply(e,t)).next())});function E(e){var t,a;const{state:n,handleEdit:r}=e,s=(null==(t=n.list)?void 0:t.find(e=>e.id===n.selectId))||(null==(a=n.list)?void 0:a[0])||{};console.log(s);const{method:o="post",title:i="Template",url:d=""}=s,[m,p]=l.useState("params");return l.createElement("div",{className:"content"},l.createElement(c.i,{className:"title"},l.createElement(u,{key:n.lastUpdate,value:i,cb:e=>r("title",e)})),l.createElement("div",{className:"header"},l.createElement(c.i,{className:"method",classNames:[o]},l.createElement(u,{key:n.lastUpdate,value:o,cb:e=>r("method",e)})),l.createElement("div",{className:"url"},l.createElement(u,{key:n.lastUpdate,value:d,cb:e=>r("url",e)})),l.createElement(c.$n,{type:"primary",onClick:()=>g(null,null,function*(){const e=yield x(s);p("result"),r("resultTxt",JSON.stringify(null==e?void 0:e.data,null,2))})},"Send")),l.createElement(c.oz,{value:m,onChange:p,items:[{key:"headers",title:"Headers",children:l.createElement(h,{key:n.lastUpdate,value:s.headerTxt,onChange:e=>r("headerTxt",e)})},{key:"params",title:"Params",children:l.createElement(h,{key:n.lastUpdate,value:s.paramsTxt,onChange:e=>r("paramsTxt",e)})},{key:"body",title:"Body",children:l.createElement(h,{key:n.lastUpdate,value:s.bodyTxt,onChange:e=>r("bodyTxt",e)})},{key:"result",title:"Result",children:l.createElement(h,{key:n.lastUpdate,value:s.resultTxt,onChange:e=>r("resultTxt",e)})}]}))}function f(e){var t;const{state:a,setState:n}=e;return l.createElement("div",{className:"list"},l.createElement(c.$n,{onClick:()=>{const e=a.list,t=Date.now().toString();e.push({id:t,title:"标题1",method:"post",url:"http://localhost",headerTxt:r,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}"}),n({list:e,selectId:t})}},"Add"),null==(t=a.list)?void 0:t.map((e,t)=>{const{id:r=String(t),method:s="post",title:o="Template"}=e;return l.createElement(c.i,{key:r,className:"item",classNames:{select:r===a.selectId},onClick:()=>{n({lastUpdate:+Date.now(),selectId:r})}},l.createElement(c.i,{className:"method",classNames:[s]},s),l.createElement(c.i,{className:"title"},o))}))}function T(){const[e,t]=(0,n.xI)({list:o(),selectId:"1",lastUpdate:Date.now()},"tool/platform-api/cache");return l.createElement("div",{className:"tool-platform-api"},l.createElement("div",{className:"container"},l.createElement(f,{state:e,setState:t}),l.createElement(E,{key:e.selectId,state:e,handleEdit:(a,l,n)=>{var r;if(!e.selectId)return;const s=(null==(r=e.list)?void 0:r.map(t=>t.id!==e.selectId?t:a?(t[a]=l,t):t))||[];t({lastUpdate:Date.now(),list:s})}})))}}}]);