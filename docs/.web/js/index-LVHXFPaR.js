import{c as w,R as L,j as c,g as N,i as E}from"./index-BcZkKaSZ.js";import{u as D,a as B}from"./index.esm-Dz0IPDcI.js";import{i as M,d as q,b as O,c as z}from"./index.esm-DEqtexvw.js";import{g as W}from"./index.esm-vp3mBawv.js";const C=32,A=C*4*2,H=[{id:"3",type:"deepseek",dataType:"chat-model"},{id:"4",type:"database",dataType:"memory"},{id:"5",type:"RSS",dataType:"tool"},{id:"6",type:"RSS",dataType:"tool"},{id:"7",type:"RSS",dataType:"tool"},{id:"8",type:"RSS",dataType:"tool"},{id:"9",type:"RSS",dataType:"tool"}].map((t,e)=>(t.row=1,t.x=-12+e*5,t)),F=[{id:"1",type:"workflow-start",row:0,x:-5,edge:"2"},{id:"2",type:"agent",dataType:"agent",label:"AI Agent",nextLabel:"Tools Agent",row:0,x:5,edge:{"chat-model":"3",memory:"4",tool:"5,6,7,8,9"}},...H],I=t=>{const e=[],o=(i,d,a="default")=>{if(!i||!M(d))return;d.split(",").forEach(l=>{const s=i,r=l;e.push({id:`${i}-${l}`,start:s,end:r,type:a})})};return t.forEach(i=>{const{id:d,to:a,edge:n}=i;if(d){if(M(a))return o(d,a);if(M(n))return o(d,n);if(q(n))for(const l in n){const s=n[l];M(s)&&o(d,s,l)}}}),e},V=(t,e)=>{if(!t.current||!O(e))return[];const o=t.current.getBoundingClientRect(),i=o.left,d=o.top,a={},n={},l=m=>{if(n[m])return n[m];const f=document.querySelector(m);if(f){const g=f.getBoundingClientRect();if(g)return n[m]=g,g}return o},s=m=>{const f=l(m);return{rect:f,top:[-i+f.left+f.width/2,-d+f.top],right:[-i+f.right,-d+f.top+f.height/2],bottom:[-i+f.left+f.width/2,-d+f.bottom],left:[-i+f.left,-d+f.top+f.height/2]}},r=(m,f)=>{const g=s(`.d-node-handle[data-id="${m.id}"][data-type="${f.dataType}"]`),p=s(`.d-node[data-id="${f.id}"]`),x=g.bottom[0],y=g.bottom[1],b=p.top[0],j=p.top[1],S=Math.abs(j-y)*3/5,v=(b-x)*2/5;return{className:"hidden-arrow dash-flow reverse-flow",d:`M ${x} ${y} C ${x+v} ${y+S}, ${b} ${j-S}, ${b} ${j-8}`}},u=(m,f)=>{let g=0,p=0,x=0,y=0;const b=s(`.d-node[data-id="${m}"]`),j=s(`.d-node[data-id="${f}"]`);if(Math.abs(b.rect.top-j.rect.top)<3?(g=b.right[0],p=b.right[1],x=j.left[0],y=j.left[1]):(g=b.bottom[0],p=b.bottom[1],x=j.top[0],y=j.top[1]),Math.abs(p-y)<1)return{d:`M ${g} ${p} ${x-8} ${y}`};const S=Math.abs(y-p)*3/5,v=(x-g)*2/5;return{d:`M ${g} ${p} C ${g+v} ${p+S}, ${x} ${y-S}, ${x} ${y-8}`}};return e.forEach(m=>{a[m.id]=m}),I(e).map(m=>{const f=a[m.start],g=a[m.end];return f.dataType==="agent"&&g.dataType?{...m,...r(f,g)}:{...m,...u(m.start,m.end)}})},G=t=>{const e=w.c(15),{nodes:o}=t,i=L.useRef(null);let d,a,n,l,s;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],a={x:900,y:100},n={},l={},s={1:"success","1-2":"success",2:"error","2-3":"error",3:"error",4:"success",5:"success",6:"success",7:"success",8:"success"},e[0]=d,e[1]=a,e[2]=n,e[3]=l,e[4]=s):(d=e[0],a=e[1],n=e[2],l=e[3],s=e[4]);let r;e[5]===Symbol.for("react.memo_cache_sentinel")?(r={open:!1,node:{}},e[5]=r):r=e[5];let u;e[6]!==o?(u={nodes:o,edges:d,offset:a,rootRect:n,nodeRect:l,status:s,dialog:r,lastUpdate:0},e[6]=o,e[7]=u):u=e[7];const[h,m]=D(u);let f;e[8]!==o||e[9]!==m||e[10]!==h?(f=()=>{const x={...h,rootRect:i.current.getBoundingClientRect(),edges:V(i,o),lastUpdate:Date.now()};m(x)},e[8]=o,e[9]=m,e[10]=h,e[11]=f):f=e[11],B("resize",f);let p;return e[12]!==m||e[13]!==h?(p={rootRef:i,state:h,setState:m},e[12]=m,e[13]=h,e[14]=p):p=e[14],p},J=["workflow-start","agent","deepseek","database","RSS"];T.includes=t=>J.includes(t);function T(t){const e=w.c(27);let o,i,d;e[0]!==t?({type:d,style:i,...o}=t,e[0]=t,e[1]=o,e[2]=i,e[3]=d):(o=e[1],i=e[2],d=e[3]);let a;e[4]!==i?(a={minWidth:30,fontSize:24,...i},e[4]=i,e[5]=a):a=e[5];const n=a;if(d==="RSS"){let s;e[6]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("path",{d:"M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"}),c.jsx("circle",{cx:"5",cy:"19",r:"1"})]}),e[6]=s):s=e[6];let r;return e[7]!==o||e[8]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"rss",style:n,...o,children:s}),e[7]=o,e[8]=n,e[9]=r):r=e[9],r}if(d==="database"){let s;e[10]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),c.jsx("path",{d:"M3 5v14a9 3 0 0 0 18 0V5"}),c.jsx("path",{d:"M3 12a9 3 0 0 0 18 0"})]}),e[10]=s):s=e[10];let r;return e[11]!==o||e[12]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"database",style:n,...o,children:s}),e[11]=o,e[12]=n,e[13]=r):r=e[13],r}if(d==="deepseek"){let s;e[14]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx("path",{d:"M23.748 4.482c-.254-.124-.364.113-.512.234-.051.039-.094.09-.137.136-.372.397-.806.657-1.373.626-.829-.046-1.537.214-2.163.848-.133-.782-.575-1.248-1.247-1.548-.352-.156-.708-.311-.955-.65-.172-.241-.219-.51-.305-.774-.055-.16-.11-.323-.293-.35-.2-.031-.278.136-.356.276-.313.572-.434 1.202-.422 1.84.027 1.436.633 2.58 1.838 3.393.137.093.172.187.129.323-.082.28-.18.552-.266.833-.055.179-.137.217-.329.14a5.526 5.526 0 01-1.736-1.18c-.857-.828-1.631-1.742-2.597-2.458a11.365 11.365 0 00-.689-.471c-.985-.957.13-1.743.388-1.836.27-.098.093-.432-.779-.428-.872.004-1.67.295-2.687.684a3.055 3.055 0 01-.465.137 9.597 9.597 0 00-2.883-.102c-1.885.21-3.39 1.102-4.497 2.623C.082 8.606-.231 10.684.152 12.85c.403 2.284 1.569 4.175 3.36 5.653 1.858 1.533 3.997 2.284 6.438 2.14 1.482-.085 3.133-.284 4.994-1.86.47.234.962.327 1.78.397.63.059 1.236-.03 1.705-.128.735-.156.684-.837.419-.961-2.155-1.004-1.682-.595-2.113-.926 1.096-1.296 2.746-2.642 3.392-7.003.05-.347.007-.565 0-.845-.004-.17.035-.237.23-.256a4.173 4.173 0 001.545-.475c1.396-.763 1.96-2.015 2.093-3.517.02-.23-.004-.467-.247-.588zM11.581 18c-2.089-1.642-3.102-2.183-3.52-2.16-.392.024-.321.471-.235.763.09.288.207.486.371.739.114.167.192.416-.113.603-.673.416-1.842-.14-1.897-.167-1.361-.802-2.5-1.86-3.301-3.307-.774-1.393-1.224-2.887-1.298-4.482-.02-.386.093-.522.477-.592a4.696 4.696 0 011.529-.039c2.132.312 3.946 1.265 5.468 2.774.868.86 1.525 1.887 2.202 2.891.72 1.066 1.494 2.082 2.48 2.914.348.292.625.514.891.677-.802.09-2.14.11-3.054-.614zm1-6.44a.306.306 0 01.415-.287.302.302 0 01.2.288.306.306 0 01-.31.307.303.303 0 01-.304-.308zm3.11 1.596c-.2.081-.399.151-.59.16a1.245 1.245 0 01-.798-.254c-.274-.23-.47-.358-.552-.758a1.73 1.73 0 01.016-.588c.07-.327-.008-.537-.239-.727-.187-.156-.426-.199-.688-.199a.559.559 0 01-.254-.078c-.11-.054-.2-.19-.114-.358.028-.054.16-.186.192-.21.356-.202.767-.136 1.146.016.352.144.618.408 1.001.782.391.451.462.576.685.914.176.265.336.537.445.848.067.195-.019.354-.25.452z",fill:"#4D6BFE"}),e[14]=s):s=e[14];let r;return e[15]!==o||e[16]!==n?(r=c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:n,...o,children:s}),e[15]=o,e[16]=n,e[17]=r):r=e[17],r}if(d==="agent"){let s;e[18]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",children:[c.jsx("path",{d:"M12 8V4H8"}),c.jsx("rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}),c.jsx("path",{d:"M2 14h2m16 0h2m-7-1v2m-6-2v2"})]}),e[18]=s):s=e[18];let r;return e[19]!==o||e[20]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"robot",style:n,...o,children:s}),e[19]=o,e[20]=n,e[21]=r):r=e[21],r}if(d==="workflow-start"){let s;e[22]===Symbol.for("react.memo_cache_sentinel")?(s=c.jsx("path",{fill:"none",style:{color:"#f76b56"},stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m16 17l5-5l-5-5m5 5H9m0 9H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e[22]=s):s=e[22];let r;return e[23]!==o||e[24]!==n?(r=c.jsx("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",className:"n8n-icon","aria-hidden":"true",focusable:"false",role:"img","data-icon":"sign-out-alt",style:n,...o,children:s}),e[23]=o,e[24]=n,e[25]=r):r=e[25],r}let l;return e[26]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(c.Fragment,{}),e[26]=l):l=e[26],l}const P=t=>{const e=w.c(28),{id:o,type:i}=t;let d;e[0]!==o?(d={className:"d-node-handle","data-id":o},e[0]=o,e[1]=d):d=e[1];const a=d;if(["deepseek","database","RSS"].includes(i)){let l;return e[2]!==a?(l=c.jsx("div",{...a,"data-location":"top","data-shape":"rotate-square"}),e[2]=a,e[3]=l):l=e[3],l}if(i==="workflow-start"){let l;return e[4]!==a?(l=c.jsx("div",{...a,"data-location":"right"}),e[4]=a,e[5]=l):l=e[5],l}if(i==="agent"){let l,s;e[6]!==a?(l=c.jsx("div",{...a,"data-location":"right"}),s=c.jsx("div",{...a,"data-location":"bottom","data-type":"chat-model","data-shape":"rotate-square"}),e[6]=a,e[7]=l,e[8]=s):(l=e[7],s=e[8]);let r;e[9]===Symbol.for("react.memo_cache_sentinel")?(r=c.jsx("span",{className:"label-required",children:"*"}),e[9]=r):r=e[9];let u,h,m,f,g,p;e[10]!==a?(h=c.jsxs("div",{...a,"data-location":"bottom","data-type":"chat-model-label","data-flag":"label",children:["Chat Model",r]}),m=c.jsx("div",{...a,"data-location":"bottom","data-type":"memory","data-shape":"rotate-square"}),f=c.jsx("div",{...a,"data-location":"bottom","data-type":"memory-label","data-flag":"label",children:"Memory"}),g=c.jsx("div",{...a,"data-location":"bottom","data-type":"tool","data-shape":"rotate-square"}),p=c.jsx("div",{...a,"data-location":"bottom","data-type":"tool-label","data-flag":"label",children:"Tool"}),u=c.jsx("div",{...a,"data-location":"left","data-shape":"square"}),e[10]=a,e[11]=u,e[12]=h,e[13]=m,e[14]=f,e[15]=g,e[16]=p):(u=e[11],h=e[12],m=e[13],f=e[14],g=e[15],p=e[16]);let x;return e[17]!==u||e[18]!==l||e[19]!==s||e[20]!==h||e[21]!==m||e[22]!==f||e[23]!==g||e[24]!==p?(x=c.jsxs(L.Fragment,{children:[l,s,h,m,f,g,p,u]}),e[17]=u,e[18]=l,e[19]=s,e[20]=h,e[21]=m,e[22]=f,e[23]=g,e[24]=p,e[25]=x):x=e[25],x}let n;return e[26]!==a?(n=c.jsxs(L.Fragment,{children:[c.jsx("div",{...a,"data-location":"top"}),c.jsx("div",{...a,"data-location":"right"}),c.jsx("div",{...a,"data-location":"bottom"}),c.jsx("div",{...a,"data-location":"left"})]}),e[26]=a,e[27]=n):n=e[27],n},U=t=>{const e=w.c(26);let o,i,d,a;e[0]!==t?({state:d,item:o,style:a,...i}=t,e[0]=t,e[1]=o,e[2]=i,e[3]=d,e[4]=a):(o=e[1],i=e[2],d=e[3],a=e[4]);const{id:n,type:l,label:s,nextLabel:r,x:u,y:h,row:m}=o,f=s===void 0?"":s,g=r===void 0?"":r,p=u===void 0?0:u,x=h===void 0?0:h,y=z(m)?m*A:x*C,b=d?.status?.[n]??"default",j=p*C+d.offset.x,S=y+C+d.offset.y;let v;e[5]!==a||e[6]!==j||e[7]!==S?(v={left:j,top:S,...a},e[5]=a,e[6]=j,e[7]=S,e[8]=v):v=e[8];let $;e[9]!==l?($=T.includes(l)&&c.jsx(T,{type:l}),e[9]=l,e[10]=$):$=e[10];let _;e[11]!==f||e[12]!==g?(_=f&&c.jsxs(N,{className:"d-node-label-container",children:[c.jsx(N,{className:"label",children:f}),c.jsx(N,{className:"next-label",none:!g,children:g})]}),e[11]=f,e[12]=g,e[13]=_):_=e[13];let k;e[14]!==n||e[15]!==l?(k=c.jsx(P,{id:n,type:l}),e[14]=n,e[15]=l,e[16]=k):k=e[16];let R;return e[17]!==n||e[18]!==i||e[19]!==k||e[20]!==b||e[21]!==v||e[22]!==$||e[23]!==_||e[24]!==l?(R=c.jsxs(N,{className:"d-node","data-id":n,"data-type":l,"data-status":b,style:v,...i,children:[$,_,k]}),e[17]=n,e[18]=i,e[19]=k,e[20]=b,e[21]=v,e[22]=$,e[23]=_,e[24]=l,e[25]=R):R=e[25],R},X=t=>{const e=w.c(9),{state:o}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[["arrowhead","#c2c8d5"],["arrowhead-hover","red"],["arrowhead-success","#3da463"],["arrowhead-error","#ea6872"],["arrowhead-warning","#fab355"]],e[0]=i):i=e[0];const d=i;let a;e[1]!==o?(a=u=>{const{id:h,start:m,end:f}=u;if(o?.status?.[h])return o.status[h];const g=o?.status?.[m]??"default",p=o?.status?.[f]??"default";return[g,p].includes("default")?"default":[g,p].includes("error")?"error":"default"},e[1]=o,e[2]=a):a=e[2];const n=a;let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx("defs",{children:d.map(Y)}),e[3]=l):l=e[3];let s;e[4]!==n||e[5]!==o?.edges?(s=o?.edges.map(u=>{const{id:h,d:m,className:f}=u;return c.jsx("path",{className:W("d-edge",f),"data-status":n(u),d:m,fill:"none",onMouseOver:()=>{console.log("hover",h)}},h)}),e[4]=n,e[5]=o?.edges,e[6]=s):s=e[6];let r;return e[7]!==s?(r=c.jsxs("svg",{className:"dev__diagram-edge-container",children:[l,s]}),e[7]=s,e[8]=r):r=e[8],r};function Y(t){const[e,o]=t;return c.jsx("marker",{id:e,markerWidth:"3.5",markerHeight:"2.5",refX:"1",refY:"1.25",orient:"auto",children:c.jsx("path",{d:"M0,0 L2.5,1.25 L0,2.5 Z",fill:o})},e)}function Z(t){const e=w.c(12),{state:o,setState:i}=t;let d;e[0]!==o.dialog?(d=o.dialog||{},e[0]=o.dialog,e[1]=d):d=e[1];const{open:a,node:n}=d;let l;e[2]!==n?(l=n===void 0?{}:n,e[2]=n,e[3]=l):l=e[3];const s=l;let r;e[4]!==i?(r=()=>{i({dialog:{open:!1,node:{}}})},e[4]=i,e[5]=r):r=e[5];let u;e[6]!==s?(u=JSON.stringify(s),e[6]=s,e[7]=u):u=e[7];let h;return e[8]!==a||e[9]!==r||e[10]!==u?(h=c.jsx(E,{className:"diagram-dialog",open:a,onCancel:r,children:u}),e[8]=a,e[9]=r,e[10]=u,e[11]=h):h=e[11],h}function se(){const t=w.c(19);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={nodes:F},t[0]=e):e=t[0];const{rootRef:o,state:i,setState:d}=G(e);let a;t[1]!==i?(a=c.jsx(X,{state:i}),t[1]=i,t[2]=a):a=t[2];let n;t[3]!==d||t[4]!==i?(n=i.nodes.map((h,m)=>c.jsx(U,{item:h,state:i,onClick:()=>{console.log(h),d({dialog:{open:!0,node:h}})}},m)),t[3]=d,t[4]=i,t[5]=n):n=t[5];let l;t[6]!==n?(l=c.jsx("div",{className:"dev__diagram-node-container",children:n}),t[6]=n,t[7]=l):l=t[7];let s;t[8]!==i.dialog?(s=JSON.stringify(i.dialog),t[8]=i.dialog,t[9]=s):s=t[9];let r;t[10]!==d||t[11]!==i||t[12]!==s?(r=c.jsx(Z,{state:i,setState:d},s),t[10]=d,t[11]=i,t[12]=s,t[13]=r):r=t[13];let u;return t[14]!==o||t[15]!==a||t[16]!==l||t[17]!==r?(u=c.jsxs("div",{className:"dev__diagram",ref:o,children:[a,l,r]}),t[14]=o,t[15]=a,t[16]=l,t[17]=r,t[18]=u):u=t[18],u}export{se as default};
