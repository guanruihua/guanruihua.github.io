"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[643],{643:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(6540),o=n(7317);const l=()=>{const[e,t]=(0,o.xI)({selectFileType:"",review:""},"dev/file-review|cache");return{state:e,setState:t}};var u=n(5134),a=(e,t,n)=>new Promise((r,o)=>{var l=e=>{try{a(n.next(e))}catch(e){o(e)}},u=e=>{try{a(n.throw(e))}catch(e){o(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,u);a((n=n.apply(e,t)).next())});function c(){const{state:e,setState:t}=l();return r.createElement("div",{className:"tool-file-review"},r.createElement("div",{className:"content"},r.createElement("div",{className:"controls"},r.createElement("h5",null,"md, txt, docx, pdf"),r.createElement("input",{type:"file",onChange:e=>{var n;(e=>{a(null,null,function*(){const n=yield(0,u._)(e);console.log(n),t({review:n})})})(null==(n=e.target.files)?void 0:n[0])}})),r.createElement("div",{className:"review"},r.createElement("pre",null,e.review))))}},5134:(e,t,n)=>{n.d(t,{_:()=>u});var r=n(9108),o=n(306),l=(e,t,n)=>new Promise((r,o)=>{var l=e=>{try{a(n.next(e))}catch(e){o(e)}},u=e=>{try{a(n.throw(e))}catch(e){o(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,u);a((n=n.apply(e,t)).next())});const u=e=>l(null,null,function*(){return new Promise(t=>l(null,null,function*(){if(!(0,r.Kg)(e.name))return;const n=e.name.split(".").at(-1),u=new FileReader;if(u.onerror=function(){t("")},["md","txt","json"].includes(n))return u.onload=function(e){var n;const o=(null==(n=e.target)?void 0:n.result)||"";(0,r.Kg)(o)&&t(o)},void u.readAsText(e);if(["docx"].includes(n))return u.onload=function(e){var n;const r=(null==(n=e.target)?void 0:n.result)||"";o.extractRawText({arrayBuffer:r}).then(e=>{console.log(e),t((null==e?void 0:e.value)||"")}).catch(()=>{t("")})},void u.readAsArrayBuffer(e);if(["pdf"].includes(n)){const n=(e,t)=>l(null,null,function*(){const n=yield e.getPage(t),r=yield n.getTextContent(),o=[];let l="",u=-1;r.items.map(e=>{const{str:t,hasEOL:n}=e;return n?(l.length>u&&(u=l.length),o.push(l),l=""):l+=t,t});let a="",c=3*u/5;return o.forEach((e,t)=>{e.length<c?a=a+e+"\n":a+=e}),a});return u.onload=e=>l(null,null,function*(){var r;try{const o=(null==(r=e.target)?void 0:r.result)||"",l=yield window.pdfjsLib.getDocument(o).promise,u=[];console.log(l);for(let e=1;e<=l.numPages;e++)u.push(n(l,e));const a=yield Promise.all(u);console.log(a),t(a.join("\n"))}catch(e){console.error(e),t("")}}),void u.readAsArrayBuffer(e)}t("")}))})},9108:(e,t,n)=>{function r(e){return null==e||e!=e}function o(e){return void 0===e}n.d(t,{B9:()=>a,Et:()=>i,Gv:()=>u,Im:()=>r,Kg:()=>c,Lm:()=>g,ZX:()=>s,b0:()=>o,cy:()=>d,vH:()=>f});Number.isNaN;function l(e){try{if("object"==typeof(t=e)&&!r(t)&&/Iterator\]$/.test(t.toString()))return"Iterator";const n=Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1];return"Number"===n&&isNaN(e)?"NaN":n}catch(e){return"Undefined"}var t}function u(e){return null!==e&&"object"==typeof e&&"Object"===l(e)}function a(e){return!r(e)&&(u(e)&&0!==Reflect.ownKeys(e).length)}function c(e){return"string"==typeof e}const i=e=>"number"==typeof e&&"Number"===l(e);function s(e){return!!i(e)||(c(e)&&(e=e.trim()),!r(e)&&""!==e&&!1===Number.isNaN(Number(e)))}function d(e){return Array.isArray(e)}function f(e){return!r(e)&&(d(e)&&e.length>0)}new Map([["Image",["png","jpeg","jpg","png","bmp"]],["Video",["mp4","webm","ogg"]],["PDF",["pdf"]],["Word",["doc","docx"]],["Excel",[".xlsx",".xls",".csv"]]]);const v="undefined"!=typeof window,g=e=>"boolean"==typeof e;v&&window?.navigator?.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}}]);