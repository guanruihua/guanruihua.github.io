import{c as u,R as r,j as e,F as m,w as h,x,z as g}from"./index-Cybe8PDz.js";const p=()=>{const s=u.c(2),t=r.useRef(null),n=r.useRef(null);let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=async()=>{const a=window.html2canvas;return(await a(t.current,{allowTaint:!0,useCORS:!0,backgroundColor:"#000"})).toDataURL("image/png")},s[0]=o):o=s[0];const d=o;let l;return s[1]===Symbol.for("react.memo_cache_sentinel")?(l={domRef:t,previewRef:n,handle:{downloadImage:async()=>{const a=await d(),c=new Image;c.src=a;const i=document.createElement("a");i.download="filename.png",i.href=a,i.click()},domToImage:async()=>{const a=await d(),c=new Image;c.src=a,n.current?.childNodes?.[0]&&n.current.removeChild(n.current.childNodes[0]),n.current?.appendChild(c)}}},s[1]=l):l=s[1],l},f=()=>{const s="https://html2canvas.hertzen.com/dist/html2canvas.min.js";r.useEffect(()=>{const t=document.createElement("script");return t.src=s,t.onload=()=>{console.log(s,"已加载")},document.body.appendChild(t),()=>{document.body.removeChild(t)}},[])},j={xAxis:{type:"value"},yAxis:{type:"value"},series:[{symbolSize:10,data:[[10,8.04],[8.07,6.95],[13,7.58],[9.05,8.81],[11,8.33],[14,7.66],[13.4,6.81],[10,6.33],[14,8.96],[12.5,6.82],[9.15,7.2],[11.5,7.2],[3.03,4.23],[12.2,7.83],[2.02,4.47],[1.05,3.33],[4.05,4.96],[6.03,7.24],[12,6.26],[12,8.84],[7.08,5.82],[5.02,5.68]],type:"scatter"}]};function w(){f();const s=p();return e.jsxs(m,{column:!0,className:"dev__dom-to-image",children:[e.jsx("div",{children:"DOM转图片"}),e.jsxs(m,{children:[e.jsx(h,{onClick:s.handle.domToImage,children:"Dom to Image"}),e.jsx(h,{onClick:s.handle.downloadImage,children:"Download Image"})]}),e.jsxs(x,{columns:2,className:"container",children:[e.jsxs("div",{className:"left",children:[e.jsx("h1",{children:"DOM转图片示例"}),e.jsxs("div",{className:"target-element",ref:s.domRef,style:{padding:10},children:[e.jsx(g,{style:{width:600,height:400,background:"#fff",zoom:".5"},options:j}),e.jsx("h2",{children:"这是一个纯DOM元素"}),e.jsx("p",{children:"这段内容将被转换为图片"}),e.jsxs("div",{style:{display:"flex",gap:"20px",margin:"15px 0"},children:[e.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:"#ff6b6b",borderRadius:"50%"}}),e.jsx("div",{style:{width:"50px",height:"50px",backgroundColor:"#4ecdc4"}})]}),e.jsx("p",{children:"使用纯JavaScript实现转换"})]})]}),e.jsxs("div",{className:"right",children:[e.jsx("h1",{children:"DOM转图片预览"}),e.jsx("div",{className:"preview-element",ref:s.previewRef})]})]})]})}export{w as default};
