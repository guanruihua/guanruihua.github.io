"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[827],{8827:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var a=l(5296),n=l(5186);const s='{\n   "Access-Control-Allow-Origin": "*",\n   "Accept": "*/*",\n//  "Accept-Encoding": "gzip,deflate,br",\n//  "Connection": "keep-alive",\n//  "Content-type": "text/plain",\n   "Content-type": "application/json",\n}',r=[{id:"1",title:"标题1",method:"post",url:"http://localhost:2400/api/v1/server/ai",headerTxt:s,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}"},{id:"2",title:"标题2",method:"get",url:"http://localhost:2400/api/v1/server/ai",headerTxt:s,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}"},{id:"1753345572425",title:"TMP POST",method:"post",url:"http://172.16.30.53:2400/api/v1/t/post",headerTxt:'{\n   "Access-Control-Allow-Origin": "*",\n   "Accept": "*/*",\n   // "Accept-Encoding": "gzip,deflate,br",\n   // "Connection": "keep-alive",\n  //  "Content-type": "text/plain",\n   "Content-type": "application/json",\n}',bodyTxt:"{}",paramsTxt:"{}"},{id:"1753346315972",title:"TMP GET",method:"get",url:"http://172.16.30.53:2400/",headerTxt:'{\n   "Access-Control-Allow-Origin": "*",\n   "Accept": "*/*",\n//  "Accept-Encoding": "gzip,deflate,br",\n//  "Connection": "keep-alive",\n//  "Content-type": "text/plain",\n   "Content-type": "application/json",\n}',bodyTxt:"{}",paramsTxt:"{}",resultTxt:'{\n  "data": "hello get api",\n  "params": {}\n}',results:[[Date.now()+90,'{\n  "data": "hello get api b",\n  "params": {}\n}'],[Date.now(),'{\n  "data": "hello get api a",\n  "params": {}\n}']]}],o=()=>r;var i=l(4777),c=l(7113);const u=({className:e,value:t,cb:l})=>{const n=a.useRef(null),[s,r]=a.useState(t),[o,u]=a.useState("idle");return a.createElement("div",{ref:n,className:(0,c.xW)(["input-edit",e]),onDoubleClick:()=>{u("edit")}},a.createElement(i.i,{title:"input-edit-value",none:"edit"===o},t),"edit"===o&&a.createElement(i.pd,{value:s,onKeyDown:e=>{"Enter"===e.code&&(s&&l(s),u("idle"))},onChange:e=>{r(e.target.value)},onBlur:()=>{s&&l(s),u("idle")}}))};var d=l(2030),m=(e,t,l)=>new Promise((a,n)=>{var s=e=>{try{o(l.next(e))}catch(e){n(e)}},r=e=>{try{o(l.throw(e))}catch(e){n(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,r);o((l=l.apply(e,t)).next())});function p(e){const{value:t="{}",onChange:l,children:n}=e,s=a.useRef(null);return a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:10,minHeight:"calc(100vh - 240px)",overflowY:"auto"}},a.createElement(d.KE,{height:"100%",width:"100%",theme:"vs-dark",defaultLanguage:"json",options:{formatOnPaste:!0,formatOnType:!0,automaticLayout:!0,scrollBeyondLastLine:!1},defaultValue:t,onMount:function(e,t){s.current=e,t.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0,trailingCommas:"ignore",schemas:[],validate:!0})},onChange:l}),a.createElement("div",{style:{display:"grid",gap:5,gridTemplateRows:"auto 1fr"}},a.createElement(i.$n,{onClick:()=>m(null,null,function*(){s.current&&(yield s.current.getAction("editor.action.formatDocument").run())})},"Format"),n))}var h=l(1938),v=l(7599);function y(e="{}"){try{return(0,v.qg)(e)}catch(e){return{}}}const g=e=>{return t=null,l=null,a=function*(){const{bodyTxt:t,headerTxt:l,method:a="post",paramsTxt:n,url:s}=e,r=y(l),o=y(n),i=y(t);try{const e=yield(0,h.A)({method:a,url:s,params:o,data:i,headers:r});return console.log(e.data),(null==e?void 0:e.data)||{}}catch(e){console.error(e)}},new Promise((e,n)=>{var s=e=>{try{o(a.next(e))}catch(e){n(e)}},r=e=>{try{o(a.throw(e))}catch(e){n(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,r);o((a=a.apply(t,l)).next())});var t,l,a};var E=l(7457),x=l.n(E);function f(e){var t,l;const{selectRecord:s,handleEdit:r}=e,[o,c]=(0,n.xI)({value:"",select:""});return a.useEffect(()=>{var e,t;const[l,a]=null!=(t=null==(e=null==s?void 0:s.results)?void 0:e[0])?t:[];l&&o.select!==l&&c({value:a,select:l})},[null==(t=null==s?void 0:s.results)?void 0:t.length]),a.createElement("div",{className:"result"},a.createElement(p,{key:o.select,value:o.value,onChange:e=>r("results",e,o.select)},a.createElement("div",{className:"result-list"},null==(l=null==s?void 0:s.results)?void 0:l.map(e=>{const[t,l]=e;return a.createElement(i.i,{key:t,classNames:["result-list-item",{select:o.select===t}],onClick:()=>c({value:l,select:t})},x()(t).format("HH:mm:ss:SSS"))}))))}var T=(e,t,l)=>new Promise((a,n)=>{var s=e=>{try{o(l.next(e))}catch(e){n(e)}},r=e=>{try{o(l.throw(e))}catch(e){n(e)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,r);o((l=l.apply(e,t)).next())});function C(e){var t,l;const{state:n,handleEdit:s}=e,r=(null==(t=n.list)?void 0:t.find(e=>e.id===n.selectId))||(null==(l=n.list)?void 0:l[0])||{},{method:o="post",title:c="Template",url:d=""}=r,[m,h]=a.useState(!1),[v,y]=a.useState("body");return a.createElement("div",{className:"content"},a.createElement(i.i,{className:"title"},a.createElement(u,{key:n.lastUpdate,value:c,cb:e=>s("title",e)})),a.createElement("div",{className:"header"},a.createElement(i.i,{className:"method",classNames:[o]},a.createElement(u,{key:n.lastUpdate,value:o,cb:e=>s("method",e)})),a.createElement("div",{className:"url"},a.createElement(u,{key:n.lastUpdate,value:d,cb:e=>s("url",e)})),a.createElement(i.$n,{disabled:m,type:"primary",onClick:()=>T(null,null,function*(){h(!0);const e=yield g(r);y("result"),s("results",JSON.stringify(e,null,2)),setTimeout(()=>{h(!1)},1e3)})},"Send")),a.createElement(i.oz,{value:v,onChange:y,items:[{key:"headers",title:"Headers",children:a.createElement(p,{value:r.headerTxt,onChange:e=>s("headerTxt",e)})},{key:"params",title:"Params",children:a.createElement(p,{value:r.paramsTxt,onChange:e=>s("paramsTxt",e)})},{key:"body",title:"Body",children:a.createElement(p,{value:r.bodyTxt,onChange:e=>s("bodyTxt",e)})},{key:"result",title:"Result",children:a.createElement(f,{selectRecord:r,handleEdit:s})}]}))}function b(e){var t;const{state:l,setState:n}=e;return a.createElement("div",{className:"list"},a.createElement(i.$n,{onClick:()=>{const e=l.list,t=Date.now().toString();e.push({id:t,title:"TMP",method:"post",url:"http://localhost:8080/",headerTxt:s,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}",results:[]}),n({list:e,selectId:t})}},"Add"),a.createElement("div",{className:"list-box"},null==(t=l.list)?void 0:t.map((e,t)=>{const{id:s=String(t),method:r="post",title:o="Template"}=e;return a.createElement(i.i,{key:s,className:"item",classNames:{select:s===l.selectId},onClick:()=>{n({lastUpdate:+Date.now(),selectId:s})}},a.createElement(i.i,{className:"method",classNames:[r]},r),a.createElement(i.i,{className:"title"},o))})))}function k(){const[e,t]=(0,n.xI)({list:o(),selectId:"1",lastUpdate:Date.now()},"tool/platform-api/cache");return a.createElement("div",{className:"tool-platform-api"},a.createElement("div",{className:"container"},a.createElement(b,{state:e,setState:t}),a.createElement(C,{key:e.selectId,state:e,handleEdit:(l,a,n)=>{var s;if(!e.selectId)return;const r=(null==(s=e.list)?void 0:s.map(t=>{if(t.id!==e.selectId)return t;if("results"===l)t.results||(t.results=[]),n?t.results=t.results.map(e=>(e[0]===n&&(e[1]=a),e)):t.results.unshift([Date.now(),a]),t.results.length>30&&(t.results=t.results.slice(0,30));else if(l)return t[l]=a,t;return t}))||[];t({lastUpdate:Date.now(),list:r})}})))}}}]);