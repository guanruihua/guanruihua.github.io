import{c as p,R as c,j as w}from"./index-BSiT3j47.js";import{u as g}from"./index.esm-DaoR0Iyu.js";const v=()=>{const e=p.c(4),[t,l]=c.useState(null);let s,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{const a=document.createElement("script");return a.src="/js/phaser.min.js",a.onload=()=>{console.log("Phaser","/js/phaser.min.js","已加载");const o=window.Phaser;l(o)},document.body.appendChild(a),()=>{document.body.removeChild(a)}},n=[],e[0]=s,e[1]=n):(s=e[0],n=e[1]),c.useEffect(s,n);let i;return e[2]!==t?(i={Phaser:t},e[2]=t,e[3]=i):i=e[3],i},y=()=>{const e=c.useRef(null),{Phaser:t}=v(),[l,s]=g({});return c.useEffect(()=>{if(!t||!e.current)return;e.current;let n={tileSize:200};var i=new t.Class({Extends:t.Scene,initialize:function(){t.Scene.call(this,{key:"PlayGame"})},preload:function(){}}),a={type:t.WEBGL,width:n.tileSize*4,height:n.tileSize*4,backgroundColor:4473924,scene:[i]};let o=new t.Game(a);function m(){var r=document.querySelector("canvas");if(r){var u=window.innerWidth,d=window.innerHeight,f=u/d,h=o.config.width/o.config.height;f<h?(r.style.width=u+"px",r.style.height=u/h+"px"):(r.style.width=d*h+"px",r.style.height=d+"px")}}m(),window.addEventListener("resize",m,!1),console.log(t)},[t,e.current]),{containerRef:e,state:l,setState:s}};function P(){const{containerRef:e}=y();return w.jsx("div",{ref:e,className:"game__pvz"})}export{P as default};
