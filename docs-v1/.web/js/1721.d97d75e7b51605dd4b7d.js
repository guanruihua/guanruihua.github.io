"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[1721],{81721(e,t,a){a.r(t),a.d(t,{default:()=>T});var l=a(65296),n=a(46045);const r='{\n   "Access-Control-Allow-Origin": "*",\n   "Accept": "*/*",\n//  "Accept-Encoding": "gzip,deflate,br",\n//  "Connection": "keep-alive",\n//  "Content-type": "text/plain",\n   "Content-type": "application/json",\n}',o=[{id:"1",title:"标题1",method:"post",url:"http://localhost:2400/api/v1/server/ai",headerTxt:r,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}"},{id:"2",title:"标题2",method:"get",url:"http://localhost:2400/api/v1/server/ai",headerTxt:r,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}"},{id:"1753345572425",title:"TMP POST",method:"post",url:"http://172.16.30.53:2400/api/v1/t/post",headerTxt:'{\n   "Access-Control-Allow-Origin": "*",\n   "Accept": "*/*",\n   // "Accept-Encoding": "gzip,deflate,br",\n   // "Connection": "keep-alive",\n  //  "Content-type": "text/plain",\n   "Content-type": "application/json",\n}',bodyTxt:"{}",paramsTxt:"{}"},{id:"1753346315972",title:"TMP GET",method:"get",url:"http://172.16.30.53:2400/",headerTxt:'{\n   "Access-Control-Allow-Origin": "*",\n   "Accept": "*/*",\n//  "Accept-Encoding": "gzip,deflate,br",\n//  "Connection": "keep-alive",\n//  "Content-type": "text/plain",\n   "Content-type": "application/json",\n}',bodyTxt:"{}",paramsTxt:"{}",resultTxt:'{\n  "data": "hello get api",\n  "params": {}\n}',results:[[Date.now()+90,'{\n  "data": "hello get api b",\n  "params": {}\n}'],[Date.now(),'{\n  "data": "hello get api a",\n  "params": {}\n}']]}];var s=a(72383),c=a(28610);const i=({className:e,value:t,cb:a})=>{const n=l.useRef(null),[r,o]=l.useState(t),[i,u]=l.useState("idle");return l.createElement("div",{ref:n,className:(0,c.xW)(["input-edit",e]),onDoubleClick:()=>{u("edit")}},l.createElement(s.i,{title:"input-edit-value",none:"edit"===i},t),"edit"===i&&l.createElement(s.pd,{value:r,onKeyDown:e=>{"Enter"===e.code&&(r&&a(r),u("idle"))},onChange:e=>{o(e.target.value)},onBlur:()=>{r&&a(r),u("idle")}}))};var u=a(22678);function d(e){const{value:t="{}",onChange:a,children:n}=e,r=l.useRef(null);return l.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:10,minHeight:"calc(100vh - 240px)",overflowY:"auto"}},l.createElement(u.KE,{height:"100%",width:"100%",theme:"vs-dark",defaultLanguage:"json",options:{formatOnPaste:!0,formatOnType:!0,wordWrap:"on",automaticLayout:!0,scrollBeyondLastLine:!1},defaultValue:t,onMount:function(e,t){r.current=e,t.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0,trailingCommas:"ignore",schemas:[],validate:!0})},onChange:a}),l.createElement("div",{style:{display:"grid",gap:5,gridTemplateRows:"auto 1fr"}},l.createElement(s.$n,{onClick:()=>{return e=null,t=null,a=function*(){r.current&&(yield r.current.getAction("editor.action.formatDocument").run())},new Promise((l,n)=>{var r=e=>{try{s(a.next(e))}catch(e){n(e)}},o=e=>{try{s(a.throw(e))}catch(e){n(e)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,o);s((a=a.apply(e,t)).next())});var e,t,a}},"Format"),n))}var m=a(98733),p=a(87599);function h(e="{}"){try{return(0,p.qg)(e)}catch(e){return{}}}const v=e=>{return t=null,a=null,l=function*(){const{bodyTxt:t,headerTxt:a,method:l="post",paramsTxt:n,url:r}=e,o=h(a),s=h(n),c=h(t);try{const e=yield(0,m.DQ)({method:l,url:r,params:s,data:c,headers:o});return console.log(e.data),(null==e?void 0:e.data)||{}}catch(e){console.error(e)}},new Promise((e,n)=>{var r=e=>{try{s(l.next(e))}catch(e){n(e)}},o=e=>{try{s(l.throw(e))}catch(e){n(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,o);s((l=l.apply(t,a)).next())});var t,a,l};var y=a(47139),f=a.n(y);function g(e){var t,a;const{selectRecord:r,handleEdit:o}=e,[i,u]=(0,n.xI)({value:"",select:""});return l.useEffect(()=>{var e,t;const[a,l]=null!=(t=null==(e=null==r?void 0:r.results)?void 0:e[0])?t:[];a&&i.select!==a&&u({value:l,select:a})},[null==(t=null==r?void 0:r.results)?void 0:t.length]),l.createElement("div",{className:"result"},l.createElement(d,{key:i.select,value:i.value,onChange:e=>o("results",e,i.select)},l.createElement("div",{className:"result-list"},null==(a=null==r?void 0:r.results)?void 0:a.map(e=>{const[t,a,n={}]=e,{responseTime:r=-1}=n;return l.createElement(s.i,{key:t,classNames:["result-list-item",{select:i.select===t}],onClick:()=>u({value:a,select:t})},l.createElement("span",null,f()(t).format("HH:mm:ss")),r>0&&l.createElement("span",null,"/"),r>0&&l.createElement("span",{className:(0,c.xW)({fast:r<5e3,slower:r<1e4&&r>=5e3,slowest:r>=1e4})},r.toFixed(2),"ms"))}))))}function E(e){var t,a;const{state:r,handleEdit:o}=e,c=(null==(t=r.list)?void 0:t.find(e=>e.id===r.selectId))||(null==(a=r.list)?void 0:a[0])||{},{method:u="post",title:m="Template",url:p=""}=c,[h,y]=l.useState(!1),[f,E]=(0,n.xI)({active:"body"},"tool/platform-api>content>active");return l.createElement("div",{className:"content"},l.createElement(s.i,{className:"title"},l.createElement(i,{key:r.lastUpdate,value:m,cb:e=>o("title",e)})),l.createElement("div",{className:"header"},l.createElement(s.i,{className:"method",classNames:[u]},l.createElement(i,{key:r.lastUpdate,value:u,cb:e=>o("method",e)})),l.createElement("div",{className:"url"},l.createElement(i,{key:r.lastUpdate,value:p,cb:e=>o("url",e)})),l.createElement(s.$n,{disabled:h,type:"primary",onClick:()=>{return e=null,t=null,a=function*(){const e=performance.now();y(!0);const t=yield v(c);E({active:"result"}),o("results",JSON.stringify(t,null,2),{responseTime:performance.now()-e}),setTimeout(()=>{y(!1)},1e3)},new Promise((l,n)=>{var r=e=>{try{s(a.next(e))}catch(e){n(e)}},o=e=>{try{s(a.throw(e))}catch(e){n(e)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,o);s((a=a.apply(e,t)).next())});var e,t,a}},"Send")),l.createElement(s.oz,{value:f.active,onChange:e=>E({active:e}),items:[{key:"headers",title:"Headers",children:l.createElement(d,{value:c.headerTxt,onChange:e=>o("headerTxt",e)})},{key:"params",title:"Params",children:l.createElement(d,{value:c.paramsTxt,onChange:e=>o("paramsTxt",e)})},{key:"body",title:"Body",children:l.createElement(d,{value:c.bodyTxt,onChange:e=>o("bodyTxt",e)})},{key:"result",title:"Result",children:l.createElement(g,{selectRecord:c,handleEdit:o})}]}))}function x(e){var t;const{state:a,setState:n}=e;return l.createElement("div",{className:"list"},l.createElement(s.$n,{onClick:()=>{const e=a.list,t=Date.now().toString();e.push({id:t,title:"TMP",method:"post",url:"http://localhost:8080/",headerTxt:r,bodyTxt:"{}",paramsTxt:"{}",resultTxt:"{}",results:[]}),n({list:e,selectId:t})}},"Add"),l.createElement("div",{className:"list-box"},null==(t=a.list)?void 0:t.map((e,t)=>{const{id:r=String(t),method:o="post",title:c="Template"}=e;return l.createElement(s.i,{key:r,className:"item",classNames:{select:r===a.selectId},onClick:()=>{n({lastUpdate:+Date.now(),selectId:r})}},l.createElement(s.i,{className:"method",classNames:[o]},o),l.createElement(s.i,{className:"title"},c))})))}var b=a(11814);function T(){const[e,t]=(0,n.xI)({list:o,selectId:"1",lastUpdate:Date.now()},"tool/platform-api/cache");return l.createElement("div",{className:"tool-platform-api"},l.createElement("div",{className:"container"},l.createElement(x,{state:e,setState:t}),l.createElement(E,{key:e.selectId,state:e,handleEdit:(a,l,n)=>{var r;if(!e.selectId)return;const o=(0,b.Gv)(n)?null==n?void 0:n.id:void 0,s=(null==(r=e.list)?void 0:r.map(t=>{if(t.id!==e.selectId)return t;if("results"===a)t.results||(t.results=[]),o?t.results=t.results.map(e=>(e[0]===o&&(e[1]=l),e)):t.results.unshift([Date.now(),l,n]),t.results.length>30&&(t.results=t.results.slice(0,30));else if(a)return t[a]=l,t;return t}))||[];t({lastUpdate:Date.now(),list:s})}})))}},98733(e,t,a){a.d(t,{C:()=>b,Vj:()=>w,FI:()=>c,DQ:()=>g,Rt:()=>T,wy:()=>i});var l=a(64242),n=a(11814),r=a(46045),o=a(11229);const s="conf|cache",c=()=>(0,o.qg)(localStorage.getItem(s),{}),i=()=>{const[e,t]=(0,r.xI)({serverUrl:"http://localhost:2400"},s);return{conf:e,setConf:e=>{t(e)}}};var u=Object.defineProperty,d=Object.defineProperties,m=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,y=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,f=(e,t)=>{for(var a in t||(t={}))h.call(t,a)&&y(e,a,t[a]);if(p)for(var a of p(t))v.call(t,a)&&y(e,a,t[a]);return e};const g=(...e)=>{return t=null,a=[...e],r=function*(e={}){let t=e,{url:a="http://localhost:2400",method:r="get",headers:o={}}=t,s=((e,t)=>{var a={};for(var l in e)h.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&p)for(var l of p(e))t.indexOf(l)<0&&v.call(e,l)&&(a[l]=e[l]);return a})(t,["url","method","headers"]);if((0,n.Kg)(a)&&!a.startsWith("http")){const{serverUrl:e}=c();a=a.startsWith("/")?e+a:e+"/"+a}return(0,l.A)((i=f({url:a,method:r},s),u={headers:f({"Content-Type":"application/json"},o)},d(i,m(u)))).catch(e=>(console.error(e),{}));var i,u},new Promise((e,l)=>{var n=e=>{try{s(r.next(e))}catch(e){l(e)}},o=e=>{try{s(r.throw(e))}catch(e){l(e)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,o);s((r=r.apply(t,a)).next())});var t,a,r};var E=a(72383),x=a(28610);const b=e=>{(0,x.Dk)(e)?E.iU.success("Copy Success "):E.iU.error("Copy Fail ")},T=e=>{const t=document.querySelector(e);null==t||t.scrollIntoView({behavior:"smooth",block:"start"})},w=(e,t)=>{const a=new Blob([e],{type:"application/json"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download=t||"data.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}}}]);