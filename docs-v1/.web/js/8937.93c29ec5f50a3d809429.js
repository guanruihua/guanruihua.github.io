"use strict";(self.webpackChunkguanruihua_github_io=self.webpackChunkguanruihua_github_io||[]).push([[8937],{46045(e,t,n){n.d(t,{xI:()=>s});var r=n(65296);function i(e){return null==e||e!=e}function l(e){try{if("object"==typeof(t=e)&&!i(t)&&/Iterator\]$/.test(t.toString()))return"Iterator";const n=Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1];return"Number"===n&&isNaN(e)?"NaN":n}catch(e){return"Undefined"}var t}function o(e){return"string"==typeof e}const u=e=>"number"==typeof e&&"Number"===l(e);function c(e){return!i(e)&&(function(e){return Array.isArray(e)}(e)&&e.length>0)}const a="undefined"!=typeof window;function s(e={},t,n=localStorage){const[i,l]=(0,r.useState)(e),a=e=>{if(l(e),t)try{n.setItem(t,JSON.stringify(e))}catch(e){return void console.warn(e)}};return(0,r.useEffect)(()=>{if(t)try{const e=n.getItem(t);if(!e||"{}"===e)return;a(JSON.parse(e))}catch(e){return}},[t,n]),[i,(e,t=!1)=>{const n="function"==typeof e?e(i):e;a(t?n:{...i,...n})},t=>{if(c(t)){const n={...i};return t.forEach(t=>{(o(t)||u(t))&&(n[t]=e[t])}),void a(n)}a(e)}]}a&&window?.navigator?.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent)},68937(e,t,n){n.r(t),n.d(t,{default:()=>p});var r=n(65296);const i=e=>10*Math.floor(e/10);var l=n(28610),o=Object.defineProperty,u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function d(e){const t=e,{id:n,none:i,onDragStart:o,onDragging:d,onDragEnd:f,children:p}=t,y=((e,t)=>{var n={};for(var r in e)c.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&u)for(var r of u(e))t.indexOf(r)<0&&a.call(e,r)&&(n[r]=e[r]);return n})(t,["id","none","onDragStart","onDragging","onDragEnd","children"]),g=r.useRef(null),v=r.useRef({id:n,drag:!1,leaveLeft:!1,dragCount:0,offsetX:0,offsetY:0,lastX:-1,lastY:-1}),m=function(e,t){let n=null;return function(){n||(n=setTimeout(()=>{e.apply(this,arguments),n=null},t))}}(t=>{var n,r;if(null==(n=null==t?void 0:t.preventDefault)||n.call(t),null==(r=null==t?void 0:t.stopPropagation)||r.call(t),!g.current||!v.current.drag)return;const i=window.document.body.getBoundingClientRect(),l=g.current.getBoundingClientRect(),o=(e,t="x")=>{if(e<0)return 0;if("x"===t){const t=i.width-l.width;if(e>=t)return t}if("y"===t){const t=i.height-l.height;if(e>=t)return t}return e},u=o(t.clientX-v.current.offsetX,"x"),c=o(t.clientY-v.current.offsetY,"y");g.current.style.left=u+"px",g.current.style.top=c+"px",null==d||d(g,v.current,e)},10);function x(){g.current&&(v.current.offsetX=0,v.current.offsetY=0,v.current.drag=!1,v.current.dragCount=v.current.dragCount+1,g.current.style.opacity="none",g.current.style.zIndex="1",g.current.style.opacity="1",g.current.style.border="none",document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",x),null==f||f(g,v.current,e))}return r.createElement("div",((e,t)=>{for(var n in t||(t={}))c.call(t,n)&&s(e,n,t[n]);if(u)for(var n of u(t))a.call(t,n)&&s(e,n,t[n]);return e})({className:(0,l.xW)("ele",{none:i}),ref:g,onMouseDown:function(t){var n,r;if(null==(n=null==t?void 0:t.preventDefault)||n.call(t),null==(r=null==t?void 0:t.stopPropagation)||r.call(t),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",x),!g.current)return;const i=g.current.getBoundingClientRect();v.current.lastX=Number(g.current.style.left.replace("px",""))||0,v.current.lastY=Number(g.current.style.top.replace("px",""))||0,v.current.offsetX=t.clientX-i.left,v.current.offsetY=t.clientY-i.top,v.current.drag=!0,g.current.style.opacity=".8",g.current.style.zIndex="10000",g.current.style.border="1px solid rgba(255,255,255, 9)",document.addEventListener("mousemove",m),document.addEventListener("mouseup",x),null==o||o(g,v.current,e)}},y),p)}var f=n(46045);function p(){var e;const t=(()=>{const[e,t]=(0,f.xI)({selectId:"",list:[{id:"1",type:"sider"}]}),n=t=>{var n;return null==(n=e.list)?void 0:n.find(e=>e.id===t)},r=()=>{var t;return(((null==(t=e.list)?void 0:t.length)||0)+1).toString()};return{state:e,setState:t,updateState:(e,t)=>{},find:n,inSider:e=>{var t;return"sider"===(null==(t=n(e))?void 0:t.type)},inContent:e=>{var t;return"content"===(null==(t=n(e))?void 0:t.type)},getId:r,to:(t,n)=>{e.list&&(e.list=e.list.map(e=>(e.id===t&&(e.type=n),e)))},create:()=>{const t={id:r(),type:"sider"};e.list?e.list.push(t):e.list=[t]},del:t=>{e.list&&(e.list=e.list.map(e=>(e.id===t&&(e.type="del"),e)))}}})(),{state:n,setState:l}=t,o=(e,t)=>{l({selectId:t.id})},u=(e,t)=>{if(!e.current)return;const n=e.current.getBoundingClientRect(),r=document.querySelector(".auxiliary-line.auxiliary-line-x"),l=document.querySelector(".auxiliary-line.auxiliary-line-y");r&&(r.style.top=i(n.top)+"px"),l&&(l.style.left=(n.left>250?i(n.left):250)+"px")},c=(e,r)=>{if(!e.current)return;const o=e.current.getBoundingClientRect(),{id:u}=r;n.list||(n.list=[]),o.left<250?(e.current.style.left="10px",e.current.style.top="10px",t.inContent(u)&&t.del(u)):(e.current.style.left=i(o.left)+"px",e.current.style.top=i(o.top)+"px",t.inSider(u)&&(t.create(),t.to(u,"content"))),l(n)};return r.createElement("div",{className:"study-drag"},r.createElement("div",{className:"sider"},null==(e=n.list)?void 0:e.map(({id:e,type:t})=>r.createElement(d,{key:e,id:e,onDragStart:o,onDragging:u,onDragEnd:c,none:"del"===t},e))),r.createElement("div",{className:"content"}),r.createElement("div",{className:"auxiliary-line auxiliary-line-x"}),r.createElement("div",{className:"auxiliary-line auxiliary-line-y"}))}}}]);